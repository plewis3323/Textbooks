(this.webpackJsonpsupernova=this.webpackJsonpsupernova||[]).push([[5],{1182:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var c=n(3),i=n(58),a=n(0),r=n(10),o=n(1245),l=n(1196),s=n(1293),u=n(66);var d=n(68);function b(){var e,t=Object(d.a)(),n=function(){var e=Object(s.a)(),t=Object(i.d)(o.c),n=Object(i.c)(),c=Object(u.a)().bookInfo;return Object(a.useEffect)((function(){e===r.c.OK&&t===r.a.WAITING&&n(Object(l.d)({isbn:c.isbn}))}),[t,e,c,n]),e===r.c.ERROR?{initStatus:e,loadStatus:r.a.ERROR}:{initStatus:e,loadStatus:t}}(),b=n.initStatus,j=n.loadStatus,O=Object(i.d)(o.b),f=Object(i.d)(o.a),h=Object(u.a)().bookInfo,g=Object(i.d)(o.d),p=Object(a.useCallback)((function(e){return t(Object(l.a)(Object(c.a)(Object(c.a)({},e),{},{metadata:{isbn:h.isbn}})))}),[h,t]),x=Object(a.useCallback)((function(e){return t(Object(l.f)(e))}),[t]),v=Object(a.useCallback)((function(e){return t(Object(l.b)(e))}),[t]);return{decksLoadStatus:j,initStatus:b,setSelectedDeck:Object(a.useCallback)((function(e){t(Object(l.e)(e))}),[t]),selectedDeck:f,createDeck:p,updateDeck:x,deleteDeck:v,decks:O,numDecks:null!==(e=null===O||void 0===O?void 0:O.length)&&void 0!==e?e:0,error:g}}},1207:function(e,t,n){"use strict";var c=n(9),i=n(0),a=n(10),r=n(100);t.a=function(e){var t,n=Object(i.useState)((null===(t=document.querySelector('script[src="'.concat(e,'"]')))||void 0===t?void 0:t.getAttribute("data-status"))||a.c.PENDING),o=Object(c.a)(n,2),l=o[0],s=o[1],u=Object(i.useCallback)((function(e,t){var n=document.querySelector('script[src="'.concat(e,'"]'));null===n||void 0===n||n.setAttribute("data-status",t),s(t)}),[]);return Object(i.useEffect)((function(){Object(r.a)(e).then((function(){u(e,a.c.OK)})).catch((function(){u(e,a.c.ERROR)}))}),[e,u]),l}},121:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return s}));var c,i=n(55),a=n(53),r=n(1231),o="(max-width: 767px)",l=function(e){return Object(a.css)(c||(c=Object(i.a)(["\n  @media "," {\n    ",";\n  }\n"])),o,Object(a.css)(e))};function s(){return Object(r.a)(o)}},1210:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}));var c=n(1240),i=n(15),a=function(e,t){Object(i.b)(e,t)},r=function(e,t){var n,i=Array.isArray(t)?t:[t],r=Object(c.a)(i);try{for(r.s();!(n=r.n()).done;){var o=n.value;a(e,{questionId:o})}}catch(l){r.e(l)}finally{r.f()}}},1211:function(e,t,n){"use strict";var c,i,a;n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a})),function(e){e.BOTTOM_RIGHT="bottomRight"}(c||(c={})),function(e){e.TOP="top",e.BOTTOM="bottom"}(i||(i={})),function(e){e.HIGHLIGHT="highlight",e.ENRICHMENT="enrichment"}(a||(a={}))},1238:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return a}));var c=function(e,t,n){return{width:e.width-2*t,height:e.height-2*n,left:e.left+t,top:e.top+n}},i=function(e,t,n,c,i){var a={left:n,top:c};return a.left+e>i.width+i.left&&(a.left=i.left+i.width-e),a.top+t>i.height+i.top&&(a.top=i.top+i.height-t),a},a=function(e,t,n,c,i){var a=function(e,t,n,c){var i=(c-90)*Math.PI/180;return{x:e+n*Math.cos(i),y:t+n*Math.sin(i)}},r=a(e,t,n,i),o=a(e,t,n,c),l=i-c<=180?"0":"1";return["M",r.x,r.y,"A",n,n,0,l,0,o.x,o.y].join(" ")}},1239:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var c=n(14),i=n(58),a=n(180);function r(){var e=Object(c.b)().getProp("CoachMe.enabled"),t=Object(i.d)(a.h);return{isCoachMeDeactivated:e&&t}}},1241:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var c=n(201),i=n(68),a=n(0),r=n(58),o=n(193);function l(e){var t=Object(i.a)(),n=Object(r.d)(Object(o.c)(e)),l=Object(r.d)(Object(o.d)(e)),s=Object(a.useCallback)((function(n){return t(Object(c.f)({syncId:e,dataFields:n}))}),[t,e]),u=Object(a.useCallback)((function(e,n){return t(Object(c.d)({markerId:e,noteText:n}))}),[t]),d=Object(a.useCallback)((function(){return t(Object(c.a)({syncId:e}))}),[t,e]),b=Object(a.useCallback)((function(e){s({noteText:e})}),[s]),j=Object(a.useCallback)((function(e){s({markerId:e})}),[s]),O=Object(a.useCallback)((function(){t(Object(c.c)(n))}),[t,n]);return Object(a.useMemo)((function(){return{highlightSelection:u,deleteHighlight:d,updateNote:b,updateMarker:j,highlight:n,markerForHighlight:l,goToHighlight:O}}),[u,d,b,j,n,l,O])}},1242:function(e,t,n){"use strict";n(0);var c=n(59),i=n(1);t.a=function(e){var t=e.className;return Object(i.jsx)(c.StarFill,{className:t,color:"#F2C400"})}},1245:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return r})),n.d(t,"d",(function(){return o})),n.d(t,"a",(function(){return l}));var c=n(1253);function i(e){return e.overleaf.decks}var a=Object(c.a)(i,(function(e){return e.deckData?Object.values(e.deckData).sort((function(e,t){return+new Date(t.inserted_at)-+new Date(e.inserted_at)})):[]})),r=function(e){return i(e).loadStatus},o=function(e){return i(e).error},l=Object(c.a)((function(e){return i(e).selected}),(function(e){return i(e).deckData}),(function(e,t){return e&&t?t[e]:null}))},1247:function(e,t,n){"use strict";n.d(t,"a",(function(){return Mt})),n.d(t,"b",(function(){return _t}));var c=n(3),i=n(17),a=n(1240),r=n(9),o=n(55),l=n(0),s=n.n(l),u=n(53),d=n(54),b=n(57),j=n(59),O=n(1377),f=n(1477),h=n(84),g=n(82),p=n(1345),x=n(195),v=n(76),m=n(68),C=n(62),E=n(63),T=Object(C.e)(E.a.SET_PADDING),k=Object(C.e)(E.a.ADD_TO_PADDING);function I(){var e=Object(m.a)(),t=Object(l.useCallback)((function(t){e(function(e){var t=e.bottom,n=void 0===t?0:t;return function(e){e(T("0 0 ".concat(n,"px 0"),"0s"))}}(t))}),[e]),n=Object(l.useCallback)((function(t){e(function(e){var t=e.top,n=void 0===t?0:t,c=e.right,i=void 0===c?0:c,a=e.bottom,r=void 0===a?0:a,o=e.left,l=void 0===o?0:o;return function(e){e(k({top:n,right:i,bottom:r,left:l},"0s"))}}(t))}),[e]);return Object(l.useMemo)((function(){return{setPadding:t,addToPadding:n}}),[t,n])}var S=n(179);function M(e,t){var n=Object(l.useRef)(e),c=Object(l.useRef)(t);Object(l.useEffect)((function(){n.current=e}),[e]);var i=Object(l.useCallback)((function(){n.current.apply(n,arguments)}),[]);return Object(l.useCallback)(Object(S.a)(c.current,i),[])}var y,w,N,_,R,L=n(1),H=u.default.div(y||(y=Object(o.a)(["\n  width: ","px;\n  height: ","px;\n  border-radius: ","px;\n  background-color: white;\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: space-around;\n"])),32,32,32),D=function(e){var t=e.onClick,n=e.ariaLabel,c=e.disabled,i=e.children;return Object(L.jsx)(d.IconButton,{onClick:t,"aria-label":n,buttonType:"floating",rounded:!0,size:"small",icon:Object(L.jsx)(H,{children:i}),color:"custom",customIconColor:b.cloud.getShade(10),disabled:c})},F=n(61),A=u.default.span(w||(w=Object(o.a)(["\n  font-size: 2.1rem;\n  ","\n"])),F.c),P=function(e){var t=e.children,n=e.onClick,c=e.disabled;return Object(L.jsx)(D,{onClick:n,disabled:c,children:Object(L.jsx)(A,{children:t})})},B=u.default.span(N||(N=Object(o.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-around;\n  width: calc(100% - 6px);\n  height: calc(100% - 6px);\n  border-radius: 100%;\n  font-size: 1.2rem;\n  font-weight: bold;\n"]))),G=function(e){var t=e.color,n=e.onClick,c=e.initials,i=e.ariaLabel;return Object(L.jsx)(D,{onClick:n,ariaLabel:i,children:Object(L.jsx)(B,{style:{backgroundColor:t},children:c})})},z=n(1296),U=u.default.span(_||(_=Object(o.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-around;\n  width: calc(100% - 6px);\n  height: calc(100% - 6px);\n  border-radius: 100%;\n"]))),K=function(e){var t=e.color,n=e.ariaLabel,c=e.onClick;return Object(L.jsx)(D,{onClick:c,ariaLabel:n,children:Object(L.jsx)(U,{style:{backgroundColor:t},children:Object(L.jsx)(z.a,{})})})};function V(e){var t=e.highlight,n=e.onClick,c=e.disabled,i=void 0!==c&&c,a=Object(O.a)(),r=a.formatMessage({id:t.subscribed?"gutter.shareNoteIconLabel":"gutter.noteIconLabel"},{date:a.formatDate(new Date(t.lastModifiedAt||0),{month:"short",day:"numeric",year:"numeric"}),initials:t.authorInitials});return t.isEmoji?Object(L.jsx)(P,{onClick:n,disabled:i,children:t.noteText}):t.subscribed?Object(L.jsx)(G,{color:t.vstColor,onClick:n,initials:t.authorInitials,ariaLabel:r}):Object(L.jsx)(K,{color:t.vstColor,ariaLabel:r,onClick:n})}var W,q=u.default.div(R||(R=Object(o.a)(["\n  display: flex;\n  & > *:first-child {\n    flex-shrink: 0;\n  }\n  & > *:nth-child(2) {\n    margin-left: 12px;\n    margin-right: 21px;\n    flex: 1 1 auto;\n    min-width: 0;\n  }\n"]))),X="gutter-expanded";function Y(e){var t=["gutter"];return e&&t.push(X),t.join(" ")}var J=u.default.div(W||(W=Object(o.a)(["\n  display: none;\n  ."," & {\n    display: block;\n  }\n"])),X);function Q(e){var t=e.children;return Object(L.jsx)(J,{children:t})}var Z,$,ee,te,ne=n(1241),ce=n(15),ie=n(177),ae={Card:Object(u.default)(d.Card).attrs((function(e){return{raised:!e.isFooter,interactive:!e.isFooter&&!e.highlight.subscribed}}))(Z||(Z=Object(o.a)(["\n    width: 100%;\n    overflow: visible;\n    position: relative;\n    ","\n  "])),(function(e){return e.isFooter&&Object(u.css)($||($=Object(o.a)(["\n        box-shadow: 0 4px 15px 0 rgba(0, 0, 0, 0.2) !important;\n        border-radius: 0;\n      "])))})),InnerContent:u.default.div(ee||(ee=Object(o.a)(["\n    border-left: 4px solid ",";\n    padding-left: 16px;\n    margin: 16px 24px;\n    overflow-wrap: break-word;\n  "])),(function(e){return e.color}))};function re(e){var t=e.children,n=e.highlight,c=e.isFooter,i=e.onClick,a=e.className;return Object(L.jsx)(ae.Card,{isFooter:c,highlight:n,onClick:i,className:a,children:Object(L.jsx)(ae.InnerContent,{color:n.vstColor,children:t})})}function oe(e){var t=e.children,n=e.onExit,c=Object(l.useRef)(null),i=Object(l.useState)(!1),a=Object(r.a)(i,2),o=a[0],s=a[1];return Object(l.useEffect)((function(){function e(e){c.current.contains(e)?s(!0):o&&(s(!1),n())}function t(){e(document.activeElement)}function i(){e(document.activeElement)}function a(t){e(t.target)}return window.addEventListener("focusin",t),window.addEventListener("blur",i),window.addEventListener("mousedown",a),window.addEventListener("touchstart",a),function(){window.removeEventListener("focusin",t),window.removeEventListener("blur",i),window.removeEventListener("mousedown",a),window.removeEventListener("touchstart",a)}}),[n,o]),Object(L.jsx)("div",{ref:c,children:t})}var le={ButtonContainer:u.default.div(te||(te=Object(o.a)(["\n    display: flex;\n    justify-content: flex-end;\n    margin-top: -12px;\n    & > *:not(:last-child) {\n      margin-right: 8px;\n    }\n  "])))};function se(e){var t=e.highlight,n=e.onDone,c=e.deleteHighlightIfEmptyNote,i=e.isFooter,a=Object(O.a)(),o=Object(l.useState)(t.noteText||""),s=Object(r.a)(o,2),u=s[0],b=s[1],f=Object(ne.a)(t.syncId),h=f.updateNote,g=f.deleteHighlight,p=Object(l.useRef)(null),x=Object(l.useCallback)((function(e){null===e||void 0===e||e.preventDefault(),c&&""===u?g():t.noteText!==u&&(h(u),Object(ce.b)("note_edit")),n()}),[u,t,n,h,g,c]),v=Object(l.useCallback)((function(){c&&!t.hasNote&&g(),n()}),[n,g,c,t]),m=!t.subscribed&&!t.isEmoji;return Object(L.jsx)(oe,{onExit:x,children:Object(L.jsx)(re,{highlight:t,isFooter:i,children:Object(L.jsxs)(d.Form,{onSubmit:x,ref:p,children:[Object(L.jsx)(d.TextField,{value:u,onChange:function(e){b(e.currentTarget.value)},fullWidth:!0,rows:3,multiline:!0,label:a.formatMessage({id:"gutter.noteTextLabel"}),placeholder:a.formatMessage({id:"gutter.noteTextPlaceholder"}),onFocus:function(e){var t=e.currentTarget;t.setSelectionRange(t.value.length,t.value.length)},onKeyDown:function(e){e.key!==ie.f||e.shiftKey||x(e)},disabled:!m}),Object(L.jsxs)(le.ButtonContainer,{children:[m&&Object(L.jsx)(d.IconButton,{label:a.formatMessage({id:"base.save"}),icon:Object(L.jsx)(j.Checkmark,{}),buttonType:"enclosed",solid:!0,size:"small",type:"submit"}),Object(L.jsx)(d.IconButton,{label:a.formatMessage({id:m?"base.cancel":"base.close"}),icon:Object(L.jsx)(j.XSmall,{}),onClick:v,buttonType:"enclosed",solid:!0,size:"small"})]})]})})})}var ue,de,be,je,Oe,fe,he,ge,pe,xe,ve,me=n(60),Ce=n(56),Ee=n(1378),Te=n(1287),ke=n(1460),Ie=n(189),Se=Object(me.createThemedComponent)(d.Button,{Button_paddingHorizontal_small:"14px"}),Me=Object(u.default)(Ie.a)(ue||(ue=Object(o.a)(["\n  position: absolute;\n  top: 6px;\n  right: 6px;\n"]))),ye={CardFrame:Object(u.default)(re)(de||(de=Object(o.a)(["\n  ","\n    &:not(:hover) ",":not(:focus-within) {\n      ",";\n    }\n  "])),(function(e){return!e.highlight.subscribed&&Object(u.css)(be||(be=Object(o.a)(["\n      cursor: pointer;\n    "])))}),Me,F.l),Date:u.default.div(je||(je=Object(o.a)(["\n    color: ",";\n    font-size: 1.2rem;\n    padding-bottom: ","px;\n  "])),b.cloud.getShade(6),8),NoteText:u.default.div(Oe||(Oe=Object(o.a)(["\n    white-space: pre-wrap;\n    ","\n  "])),(function(e){return e.isLongText&&Object(u.css)(fe||(fe=Object(o.a)(["\n        padding-bottom: 14px;\n      "])))})),MoreButton:Object(u.default)(Se)(he||(he=Object(o.a)(["\n    position: absolute;\n    bottom: 0;\n    right: 0;\n  "]))),SharedBy:u.default.p(ge||(ge=Object(o.a)(["\n    color: ",";\n    font-size: 1.3rem;\n    padding-bottom: ","px;\n    font-weight: 500;\n  "])),b.cloud.getShade(7),8),ViewInBookBtn:Object(u.default)(ke.a)(pe||(pe=Object(o.a)(["\n    position: absolute;\n    top: 5px;\n    left: 10.6rem;\n    font-size: 1.2rem;\n  "])))};function we(e){var t=e.highlight,n=e.onEditRequest,c=Object(O.a)(),i=Object(l.useState)(!1),a=Object(r.a)(i,2),o=a[0],s=a[1],u=Object(l.useState)(!1),d=Object(r.a)(u,2),b=d[0],f=d[1],h="gutter-note-card-".concat(t.syncId),p=Object(ne.a)(t.syncId).goToHighlight;return Object(L.jsx)(ye.CardFrame,{highlight:t,onClick:function(e){var c=!!e.target.closest("button");t.subscribed||c||n()},children:Object(L.jsxs)("div",{id:h,children:[Object(L.jsx)(ye.Date,{children:Object(L.jsx)(Ce.FormattedDate,{value:new Date(t.lastModifiedAt),year:"numeric",month:"numeric",day:"numeric"})}),t.subscribed&&Object(L.jsx)(ye.SharedBy,{children:Object(L.jsx)(Ee.a,{id:"gutter.sharedBy",values:{name:t.authorName}})}),Object(L.jsx)(ye.NoteText,{isLongText:b,children:Object(L.jsx)(Te.a,{isExpanded:o,numLines:3,onExpandableStatus:function(e){return f(e)},children:t.noteText})}),Object(L.jsx)(ye.ViewInBookBtn,{onClick:p,children:c.formatMessage({id:"workbook.highlights.options.viewInBook"})}),!t.subscribed&&Object(L.jsx)(Me,{size:"small",icon:Object(L.jsx)(j.Edit,{}),onClick:n,label:Object(g.c)(c.formatMessage({id:"gutter.editNote"}))}),b&&Object(L.jsx)(ye.MoreButton,{naked:!0,size:"small",onClick:function(){return s(!o)},children:Object(L.jsx)(Ee.a,{id:o?"base.less":"base.more"})})]})})}!function(e){e.GUTTER_ICON_BUTTON="gutter-icon-button",e.EDIT_BUTTON="edit-button",e.INPUT="input"}(xe||(xe={})),function(e){e[e.SET_IS_EDITING=0]="SET_IS_EDITING",e[e.SET_IS_NOT_EDITING=1]="SET_IS_NOT_EDITING",e[e.BASIC_FOCUS=2]="BASIC_FOCUS",e[e.CLEAR_FOCUS=3]="CLEAR_FOCUS"}(ve||(ve={}));var Ne=function(e,t){switch(t){case ve.SET_IS_EDITING:return{isEditing:!0,toFocus:xe.INPUT};case ve.SET_IS_NOT_EDITING:return{isEditing:!1,toFocus:xe.EDIT_BUTTON};case ve.BASIC_FOCUS:return Object(c.a)(Object(c.a)({},e),{},{toFocus:xe.GUTTER_ICON_BUTTON});case ve.CLEAR_FOCUS:return Object(c.a)(Object(c.a)({},e),{},{toFocus:null});default:return e}};function _e(e){var t=e.highlight,n=e.toggleGutterOpen,c=e.needsFocus,i=e.needsFocusProcessed,a=e.isNewHighlight,o=e.onDone,s=Object(l.useReducer)(Ne,{toFocus:null,isEditing:!1}),u=Object(r.a)(s,2),d=u[0],b=d.toFocus,j=d.isEditing,O=u[1],f=Object(l.useRef)(null);return Object(l.useEffect)((function(){if(f.current&&b){var e;if(b===xe.GUTTER_ICON_BUTTON)null===(e=Object(v.a)(f.current)[0])||void 0===e||e.focus();else if(b===xe.EDIT_BUTTON){var t;null===(t=Object(v.a)(f.current)[2])||void 0===t||t.focus()}else if(b===xe.INPUT){var n;null===(n=f.current.querySelector("textarea"))||void 0===n||n.focus()}O(ve.CLEAR_FOCUS)}}),[b]),Object(l.useEffect)((function(){if(c){var e=!t.subscribed&&!t.isEmoji,n=!t.hasNote&&e;O(n?ve.SET_IS_EDITING:ve.BASIC_FOCUS),i()}}),[c,t,i]),j||t.hasNote?Object(L.jsxs)(q,{ref:f,children:[Object(L.jsx)(V,{highlight:t,onClick:n}),!t.isEmoji&&Object(L.jsx)(Q,{children:j?Object(L.jsx)(se,{highlight:t,onDone:function(){O(ve.SET_IS_NOT_EDITING),o()},deleteHighlightIfEmptyNote:a}):Object(L.jsx)(we,{highlight:t,onEditRequest:function(){return O(ve.SET_IS_EDITING)}})})]}):null}var Re,Le,He,De=n(32),Fe=n(69),Ae=Object(u.keyframes)(Re||(Re=Object(o.a)(["\n  from {\n    transform: translateY(100%);\n  }\n  to {\n    transform: translateY(0);\n  }\n"]))),Pe={Container:u.default.div(Le||(Le=Object(o.a)(["\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    ",";\n  "])),!Object(De.b)()&&Object(u.css)(He||(He=Object(o.a)(["\n      animation: "," 0.2s ease-in-out;\n    "])),Ae))};function Be(e){var t=e.highlight,n=e.needsFocus,c=e.needsFocusProcessed,i=e.isNewHighlight,a=e.onDone,o=Object(l.useState)(!1),s=Object(r.a)(o,2),u=s[0],d=s[1],b=Object(O.a)();return Object(l.useEffect)((function(){n&&(d(!0),c())}),[n,c]),Object(L.jsxs)(L.Fragment,{children:[(u||t.hasNote)&&Object(L.jsx)(V,{highlight:t,onClick:t.isEmoji?void 0:function(){return d(!u)},disabled:t.isEmoji}),Object(L.jsx)(Fe.b,{type:Fe.a.FullScreen,open:u,label:b.formatMessage({id:"gutter.editNote"}),onRequestClose:function(){return d(!1)},disableAnimation:!0,children:Object(L.jsx)(Pe.Container,{children:Object(L.jsx)(se,{highlight:t,onDone:function(){d(!1),a()},deleteHighlightIfEmptyNote:i,isFooter:!0})})})]})}var Ge=n(212);function ze(e){var t=e.highlight,n=e.toggleGutterOpen,i=e.needsFocus,a=e.isNewHighlight,o=Object(Ge.a)(),s=Object(h.d)().clearMetadata,u=Object(l.useState)(a),d=Object(r.a)(u,2),b=d[0],j=d[1],O={highlight:t,toggleGutterOpen:n,needsFocus:i,needsFocusProcessed:s,isNewHighlight:b,onDone:function(){return j(!1)}};return o?Object(L.jsx)(_e,Object(c.a)({},O)):Object(L.jsx)(Be,Object(c.a)({},O))}var Ue,Ke,Ve,We,qe,Xe,Ye=n(1211),Je=n(106),Qe=n(1461),Ze=n(1462),$e={Card:Object(u.default)(d.Card)(Ue||(Ue=Object(o.a)(["\n    width: 100%;\n    overflow: visible;\n  "]))),Button:u.default.button(Ke||(Ke=Object(o.a)(["\n    text-align: left;\n    width: 100%;\n  "]))),InnerContent:u.default.div(Ve||(Ve=Object(o.a)(["\n    border-left: 4px solid ",";\n    margin: 16px 24px;\n    padding-left: 16px;\n  "])),(function(e){return Object(Ze.a)(e.status)})),Header:u.default.div(We||(We=Object(o.a)(["\n    font-size: 1.2rem;\n    line-height: 1.8rem;\n    display: flex;\n    align-items: flex-start;\n    margin-bottom: 4px;\n  "]))),Status:Object(u.default)(Qe.a)(qe||(qe=Object(o.a)(["\n    margin-right: 8px;\n    border: 1px solid transparent; // match bubble layout\n  "]))),Bubble:u.default.span(Xe||(Xe=Object(o.a)(["\n    border: 1px solid ",";\n    border-radius: 10px;\n    padding: 0 8px;\n    font-weight: 500;\n    color: ",";\n    white-space: nowrap;\n  "])),b.cloud.getShade(4),(function(e){return Object(Ze.b)(e.status)}))};function et(e){var t=e.assessmentType,n=e.enrichmentStatus,c=e.questionCount,i=e.onClick;return Object(L.jsx)($e.Card,{raised:!0,interactive:!0,children:Object(L.jsx)($e.Button,{onClick:i,children:Object(L.jsx)($e.InnerContent,{status:n,children:Object(L.jsx)("p",{children:function(){if(t===Je.a.SUMMATIVE)return Object(L.jsx)(Ee.a,{id:"checkpoint.knowledgeCheckpoint"});var e={count:c};switch(n){case Je.b.INCOMPLETE:return Object(L.jsx)(Ee.a,{id:"checkpoint.startPractice",values:e});case Je.b.INCORRECT:return Object(L.jsx)(Ee.a,{id:"checkpoint.retryPractice",values:e});default:return Object(L.jsx)(Ee.a,{id:"checkpoint.reviewPractice",values:e})}}()})})})})}var tt=n(1476),nt=n(1463);function ct(e){var t=e.onClick,n=e.questionCount,c=e.enrichmentStatus,i=e.assessmentType,a=Object(O.a)(),r=function(e){var t=Object(O.a)(),n="checkpoint.incomplete";return e===Je.b.CORRECT?n="checkpoint.correct":e===Je.b.INCORRECT?n="checkpoint.incorrect":e===Je.b.COMPLETE&&(n="checkpoint.complete"),t.formatMessage({id:n})}(c),o=i===Je.a.SUMMATIVE?a.formatMessage({id:"checkpoint.knowledgeCheckpoint"}):a.formatMessage({id:"checkpoint.practiceQuestion"},{count:n}),l=n>1&&i===Je.a.FORMATIVE;return o+=l?" (".concat(n,")"):"",o+=" (".concat(r,")"),Object(L.jsxs)(D,{onClick:t,ariaLabel:o,children:[Object(L.jsx)(tt.a,{enrichmentStatus:c,assessmentType:i}),l&&Object(L.jsx)(nt.a,{children:n})]})}var it=n(1210),at=n(74);function rt(e){var t=e.data,n=Object(h.d)().openPanel,c=Object(at.a)().registerPOI,i=function(){Object(it.a)("enrichment_icon_clicked",{enrichmentId:t.id}),Object(it.a)("enrichment_panel_opened",{enrichmentId:t.id}),t.cfi&&c(t.cfi,{align:"bottom"}),n(h.b.ENRICHMENT,t,{opener:h.a.GutterIcon})};return Object(L.jsxs)(q,{children:[Object(L.jsx)(ct,{onClick:i,questionCount:t.count,enrichmentStatus:t.status,assessmentType:t.type}),Object(L.jsx)(Q,{children:Object(L.jsx)(et,{assessmentType:t.type,enrichmentStatus:t.status,questionCount:t.count,onClick:i})})]})}function ot(e){var t,n=e.type,c=e.data,i=e.toggleGutterOpen,a=e.needsFocus,r=e.itemOptions,o=Object(l.useCallback)((function(){i(c)}),[c,i]);return n===Ye.b.HIGHLIGHT?Object(L.jsx)(ze,{highlight:c,toggleGutterOpen:o,needsFocus:a,isNewHighlight:null!==(t=null===r||void 0===r?void 0:r.willDeleteOnCancel)&&void 0!==t&&t}):n===Ye.b.ENRICHMENT?Object(L.jsx)(rt,{data:c}):null}var lt,st,ut,dt,bt,jt=n(1464),Ot=n(1242),ft=n(1248),ht=n(92),gt={OnboardingCard:Object(u.default)(d.Card)(lt||(lt=Object(o.a)(["\n    background-color: white;\n    padding: 20px;\n    position: absolute;\n    z-index: 1; // see also icon\n    margin: 70px 20px 0;\n    overflow: visible;\n    h1 {\n      color: ",";\n      font-weight: bold;\n      font-size: 2.6rem;\n      margin-bottom: 15px;\n    }\n  "])),Object(F.a)(7)),CloseButton:Object(u.default)(d.IconButton)(st||(st=Object(o.a)(["\n    position: absolute;\n    right: 10px;\n    top: 10px;\n  "]))),PowerFeature:u.default.div(ut||(ut=Object(o.a)(["\n    text-transform: uppercase;\n    display: flex;\n    font-size: 1.2rem;\n    color: ",";\n    letter-spacing: 1.05px;\n    align-items: center;\n    font-weight: 500;\n    margin-bottom: 15px;\n\n    p {\n      margin-top: 2px;\n    }\n\n    svg {\n      height: 12px;\n      width: 12px;\n      margin-right: 5px;\n    }\n  "])),b.cloud.getShade(6)),List:u.default.ul(dt||(dt=Object(o.a)(["\n    margin-left: 25px;\n    li {\n      list-style-type: disc !important;\n      line-height: 22px;\n    }\n\n    li:not(:last-child) {\n      margin-bottom: 10px;\n    }\n\n    svg {\n      margin-top: 3px;\n    }\n  "])))};function pt(e){var t=e.closeOnboarding,n=Object(O.a)(),i=Object(ht.a)(),a=i.buttonProps,r=i.contentProps;return Object(L.jsxs)(gt.OnboardingCard,{"data-coachme-onboarding-id":"coachme-onboarding",children:[Object(L.jsxs)(gt.PowerFeature,{children:[Object(L.jsx)(Ot.a,{}),Object(L.jsx)("p",{children:n.formatMessage({id:"base.powerFeature"})})]}),Object(L.jsx)(gt.CloseButton,{icon:Object(L.jsx)(j.XSmall,{}),color:"custom",customIconColor:b.cloud.getShade(10),rounded:!0,size:"small",onClick:t,label:n.formatMessage({id:"base.close"})}),Object(L.jsx)("h1",{children:n.formatMessage({id:"gutter.coachMe.onboarding.title"})}),Object(L.jsxs)(gt.List,{children:[Object(L.jsx)("li",{children:n.formatMessage({id:"gutter.coachMe.onboarding.bullets.1"})},"1"),Object(L.jsx)("li",{children:n.formatMessage({id:"gutter.coachMe.onboarding.bullets.2"})},"2"),Object(L.jsx)("li",{children:n.formatMessage({id:"gutter.coachMe.onboarding.bullets.3"},{a:function(e){return Object(L.jsx)(d.Button,{inline:!0,onClick:a.onClick,children:e})}})},"3")]}),Object(L.jsx)(ft.a,Object(c.a)(Object(c.a)({},r),{},{selectedTab:ft.b.CHECKPOINT}))]})}var xt={Container:u.default.div(bt||(bt=Object(o.a)(["\n    position: absolute;\n    z-index: 1; // see also card\n    top: 75px;\n  "])))};function vt(e){var t=e.onClick,n=e.leftPosition,c=Object(O.a)();return Object(L.jsx)(xt.Container,{style:{left:n},children:Object(L.jsx)(D,{onClick:t,ariaLabel:c.formatMessage({id:"base.powerFeature"}),children:Object(L.jsx)(Ot.a,{})})})}var mt,Ct,Et,Tt=n(113),kt=function(e){var t=e.isGutterOpen,n=e.toggleGutter,c=e.iconLeft,i=Object(jt.a)(),a=i.showOnboarding,r=i.closeOnboarding,o=Object(l.useRef)(!1),s=Object(Ge.a)(),u=Object(l.useCallback)((function(){o.current=!0,n()}),[n]);if(Object(l.useEffect)((function(){t||(o.current=!1)}),[t]),a&&s){if(t){var d=Object(L.jsx)(pt,{closeOnboarding:r});return o.current?Object(L.jsx)(Tt.a,{children:d}):d}return Object(L.jsx)(vt,{onClick:u,leftPosition:c})}return null},It=n(87),St=n(1295),Mt=300,yt="data-gutter-id",wt={Container:u.default.section(mt||(mt=Object(o.a)(["\n    width: 100%;\n    position: relative;\n  "]))),ExpandButtonContainer:u.default.div(Ct||(Ct=Object(o.a)(["\n    top: 15px;\n    position: fixed;\n    z-index: 10;\n  "]))),ItemPositioner:u.default.li(Et||(Et=Object(o.a)(["\n    position: absolute;\n    width: 100%;\n  "])))},Nt=s.a.memo(ot);function _t(e){var t=e.isOpen,n=e.context,o=e.theme,s=e.hideExpandButton,u=void 0!==s&&s,m=e.closedWidth,C=e.refocusGutterIconUuid,E=Object(O.a)(),T=Object(f.a)(),k=T.positionedItems,S=T.contextHeight,y=Object(l.useRef)(null),w=Object(p.a)(),N=w.scrollYByOffset,_=w.scrollTop,R=Object(x.a)(),H=I(),D=H.setPadding,F=H.addToPadding,A=Object(l.useRef)({}),P=Object(h.d)().togglePanel,B=Object(Ge.a)(),G=Object(at.a)().registerPOI,z=Object(l.useState)(!1),U=Object(r.a)(z,2),K=U[0],V=U[1],W=Object(l.useCallback)((function(e){if(null!==e&&void 0!==e&&e.cfi){var t=Object(It.h)(e.cfi);t&&G(t.toString())}P(h.b.EXPANDED_GUTTER)}),[G,P]);function q(e){var t;return null===(t=y.current)||void 0===t?void 0:t.querySelector("[".concat(yt,"='").concat(e,"']"))}function X(e){return e.closest("li")}var J=Object(l.useCallback)((function(){if(0!==k.length){var e=k[k.length-1].uuid,t=A.current[e],n=t.height,c=t.y;c+n+8>S&&F({bottom:c-S+n+8})}else D({bottom:0})}),[k,S,D,F]),Q=Object(l.useCallback)((function(){A.current={};var e=Number.NEGATIVE_INFINITY;k.forEach((function(t){var n=t.position,c=t.uuid,i=t.positionMode,a=q(c),r=a.offsetHeight,o=i===Ye.a.BOTTOM?Math.max(n.y-r,e):Math.max(n.y,e);o=Math.max(0,o),a.style.transform="translateY(".concat(o,"px)"),A.current[c]={y:o,height:r},r>0&&(e=o+r+8)}))}),[k]),Z=Object(l.useCallback)((function(){if(y.current&&document.activeElement&&y.current.contains(document.activeElement)){var e=X(document.activeElement),t=e.getAttribute(yt),n=A.current[t],c=n.y,i=n.height,a=c-_;"textarea"===document.activeElement.nodeName.toLowerCase()&&Object(De.c)()&&setTimeout((function(){window.scrollTo(0,0),R.height-a<R.height/3&&N(R.height/2)}),150),Object(v.e)(e),a<0?N(a-65):a+i>R.height&&N(a-R.height+i+8)}}),[R,N,_]),$=M(Z,Mt),ee=M(J,Mt);Object(l.useLayoutEffect)((function(){Q(),ee(),$()}),[Q,ee,$]),Object(l.useEffect)((function(){var e=y.current;if(e){var t=new MutationObserver((function(e){var t,n=Object(a.a)(e);try{for(n.s();!(t=n.n()).done;){var c=t.value,i=X(c.target);if(i&&(i!==c.target||"childList"===c.type)&&"tooltip"!==c.target.getAttribute("role"))return Q(),J(),void Z()}}catch(r){n.e(r)}finally{n.f()}}));return t.observe(e,{attributes:!0,childList:!0,subtree:!0}),function(){return t.disconnect()}}}),[Q,J,Z]);var te=(m-32)/2,ne=Math.floor(te);return Object(l.useEffect)((function(){if(C&&!K&&y.current){var e=q(Object(St.a)({id:C}));e&&setTimeout((function(){var t,n=e.getBoundingClientRect();n.top>0&&n.bottom<window.innerHeight&&(null===e||void 0===e||null===(t=e.querySelector("button"))||void 0===t||t.focus());V(!0)}),Mt)}}),[K,C,y]),Object(L.jsxs)(wt.Container,{"aria-label":E.formatMessage({id:"gutter.label"}),children:[!u&&B&&Object(L.jsx)(wt.ExpandButtonContainer,{style:{transform:"translateY(".concat(R.top,"px)"),right:Math.ceil(te)},children:Object(L.jsx)(d.IconButton,{color:"custom",customIconColor:b.cloud.getShade(10),customIconFocusColor:o.vstui.color.primary.getShade(6),rounded:!0,onClick:W,icon:t?Object(L.jsx)(j.CaretRightSmall,{}):Object(L.jsx)(j.CaretLeftSmall,{}),label:Object(g.c)(E.formatMessage({id:"gutter.openClose"})),tooltipPlacement:"bottom","aria-expanded":t,buttonType:"floating",size:"small"})}),Object(L.jsx)(kt,{isGutterOpen:t,toggleGutter:W,iconLeft:ne}),Object(L.jsx)("ul",{ref:y,onFocus:Z,style:{transform:"translateY(-".concat(_,"px)")},className:Y(t),children:k.map((function(e){var t=e.uuid,a=e.data,r=e.type;return Object(L.jsx)(wt.ItemPositioner,Object(c.a)(Object(c.a)({},Object(i.a)({},yt,t)),{},{style:{paddingLeft:ne},children:Object(L.jsx)(Nt,{type:r,data:a,toggleGutterOpen:W,needsFocus:(null===n||void 0===n?void 0:n.uuid)===t,itemOptions:null===n||void 0===n?void 0:n.options})}),t)}))})]})}},1248:function(e,t,n){"use strict";n.d(t,"b",(function(){return Pt})),n.d(t,"a",(function(){return Ut}));var c,i=n(9),a=n(3),r=n(17),o=n(55),l=n(0),s=n(54),u=n(1377),d=n(1378),b=n(53),j=n(59),O=n(110),f=n.n(O),h=n(1),g={Container:b.default.div(c||(c=Object(o.a)(["\n    width: ","px;\n    height: ","px;\n    border-radius: ","px;\n    border-style: solid;\n    border-width: ",";\n    color: white;\n    position: relative;\n    cursor: pointer;\n\n    & > * {\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%) scale(0.75);\n    }\n  "])),32,32,32,(function(e){return e.selected?"3px":"1px"}))};function p(e){var t,n=e.marker,c=e.selected,i=void 0!==c&&c,a=Object(u.a)(),r={backgroundColor:n.vstColor,borderColor:n.vstColorDark},o=Object(h.jsx)(g.Container,{style:r,selected:i,children:n.shared&&Object(h.jsx)(j.Group,{color:"rgb(28, 28, 28, 0.5)"})});return n.shared?(t=o,Object(h.jsx)(f.a,{placement:"top",title:a.formatMessage({id:"prefs.highlighters.publicHighlighter"}),children:t})):o}var x=n(57),v=n(14),m=n(58),C=n(118),E=n(1192),T=n(68);function k(){var e=Object(m.d)(C.e),t=Object(m.d)(C.d),n=Object(T.a)();return Object(l.useEffect)((function(){n(Object(E.c)())}),[n]),{colorOptions:t,loadStatus:e}}var I,S,M,y,w,N,_,R,L,H,D,F=n(113),A=n(67),P={ColorList:b.default.ul(I||(I=Object(o.a)(["\n    display: flex;\n    justify-content: space-between;\n    margin-left: -2px;\n  "]))),ColorListItem:b.default.li(S||(S=Object(o.a)(["\n    display: inline-block;\n    margin-bottom: 10px;\n  "]))),NameLabel:b.default.label(M||(M=Object(o.a)(["\n    display: inline-block;\n    margin-bottom: 7px;\n    font-weight: 500;\n    font-size: 1.5rem;\n  "]))),NameLine:b.default.div(y||(y=Object(o.a)(["\n    display: flex;\n    align-items: center;\n    & > * {\n      flex: 0;\n    }\n    // Text field\n    & > *:first-child {\n      flex: 1;\n      &:not(:last-child) {\n        margin-right: 12px;\n      }\n    }\n  "]))),FooterButtons:b.default.div(w||(w=Object(o.a)(["\n    display: flex;\n    justify-content: flex-end;\n    button {\n      margin-left: 4px;\n    }\n  "]))),OuterContainer:b.default.div(N||(N=Object(o.a)(["\n    padding: 8px 0 16px 0;\n    margin: auto -24px;\n    background-color: ",";\n  "])),x.cloud.getShade(2)),InnerContainer:b.default.div(_||(_=Object(o.a)(["\n    margin: auto 24px;\n  "]))),IconWrapper:b.default.div(R||(R=Object(o.a)(["\n    margin-bottom: 20px;\n    margin-left: 8px;\n    color: ",";\n    & > * {\n      margin-top: 2px;\n      width: 2.2rem;\n      height: 1.6rem;\n    }\n  "])),x.cloud.getShade(6))};function B(e){var t,n=e.markerToEdit,c=e.onCancel,r=e.onSave,o=Object(u.a)(),b=Object(l.useRef)(Object(A.a)()),O=k().colorOptions;function f(e){return o.formatMessage({id:"highlighters.".concat(e.labelId)})}var g=n||Object(a.a)(Object(a.a)({},O[0]),{},{label:f(O[0])}),x=Object(l.useState)(g.label),m=Object(i.a)(x,2),C=m[0],E=m[1],T=Object(l.useState)(null!==(t=g.shared)&&void 0!==t&&t),I=Object(i.a)(T,2),S=I[0],M=I[1],y=Object(l.useState)(O.findIndex((function(e){return e.vstColor===g.vstColor}))),w=Object(i.a)(y,2),N=w[0],_=w[1],R=Object(v.b)().getProp("Sharing.enabled");return Object(l.useEffect)((function(){C.length>50&&E(C.substr(0,50))}),[C]),Object(h.jsx)(F.a,{children:Object(h.jsx)(P.OuterContainer,{children:Object(h.jsxs)(P.InnerContainer,{children:[Object(h.jsx)(P.ColorList,{children:O.map((function(e,t){return Object(h.jsx)(P.ColorListItem,{children:Object(h.jsx)(s.Button,{naked:!0,inline:!0,label:o.formatMessage({id:"highlighters.longName"},{name:f(e)}),onClick:function(){_(t),n||E(f(e))},children:Object(h.jsx)(p,{marker:e,selected:N===t})})},e.labelId)}))}),Object(h.jsx)(P.NameLabel,{htmlFor:b.current,children:Object(h.jsx)(d.a,{id:"highlighters.highlighterName"})}),Object(h.jsxs)(P.NameLine,{children:[Object(h.jsx)(s.TextField,{value:C,onChange:function(e){E(e.currentTarget.value)},fullWidth:!0,id:b.current}),R&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(s.Checkbox,{checked:S,label:o.formatMessage({id:"sharing.public"}),onChange:function(){return M(!S)},fullWidth:!0}),Object(h.jsx)(P.IconWrapper,{children:Object(h.jsx)(j.Group,{})})]})]}),Object(h.jsxs)(P.FooterButtons,{children:[Object(h.jsx)(s.Button,{naked:!0,onClick:c,children:Object(h.jsx)(d.a,{id:"base.cancel"})}),Object(h.jsx)(s.Button,{onClick:function(){var e=O[N].vstColor;r({color:e,label:C,shared:S})},children:Object(h.jsx)(d.a,{id:"".concat(n?"base.save":"base.add")})})]})]})})})}var G={Container:b.default.div(L||(L=Object(o.a)(["\n    padding: 16px 0;\n    margin-bottom: -1px; // hide gray bottom border\n  "]))),Message:b.default.p(H||(H=Object(o.a)(["\n    padding-bottom: 16px;\n  "]))),Buttons:b.default.div(D||(D=Object(o.a)(["\n    display: flex;\n    justify-content: flex-end;\n    button {\n      margin-left: 4px;\n    }\n  "])))};function z(e){var t=e.marker,n=e.onDelete,c=e.onCancel;return Object(h.jsx)(F.a,{children:Object(h.jsxs)(G.Container,{children:[Object(h.jsx)(G.Message,{children:Object(h.jsx)(d.a,{id:"highlighters.deleteConfirmMsg",values:{name:t.label}})}),Object(h.jsxs)(G.Buttons,{children:[Object(h.jsx)(s.Button,{onClick:c,naked:!0,"data-interaction-id":"preferences_highlighter_manage_delete",children:Object(h.jsx)(d.a,{id:"base.cancel"})}),Object(h.jsx)(s.Button,{onClick:n,children:Object(h.jsx)(d.a,{id:"base.delete"})})]})]})})}var U,K,V,W,q,X,Y,J=n(85),Q=n(61),Z=n(15),$={OuterContainer:b.default.div(U||(U=Object(o.a)(["\n    margin: auto -24px;\n    ","\n  "])),(function(e){return e.open&&Object(b.css)(K||(K=Object(o.a)(["\n        background-color: ",";\n      "])),x.cloud.getShade(2))})),InnerContainer:b.default.div(V||(V=Object(o.a)(["\n    margin: auto 24px;\n  "]))),RowHeader:b.default.div(W||(W=Object(o.a)(["\n    display: flex;\n    padding: 5px 0;\n    align-items: center;\n  "]))),MarkerButton:b.default.button(q||(q=Object(o.a)(["\n    text-align: left;\n    display: flex;\n    flex: 1;\n    padding: 3px 0;\n    outline-color: ",";\n  "])),Object(Q.i)(6)),MarkerLabel:b.default.div(X||(X=Object(o.a)(["\n    flex: 1;\n    padding-left: 14px;\n    padding-top: 6px;\n  "])))};function ee(e){var t=e.marker,n=e.allowDelete,c=e.onToggleExpand,a=e.isExpanded,r=Object(l.useState)(Y.EDIT),o=Object(i.a)(r,2),b=o[0],j=o[1],O=Object(l.useState)(!1),f=Object(i.a)(O,2),g=f[0],x=f[1],v=function(e){var t=Object(T.a)();return{deleteMarker:function(){return t(Object(E.b)(e))},updateMarker:function(n){return t(Object(E.e)(e,n))}}}(t.globalId),m=v.updateMarker,C=v.deleteMarker,k=Object(u.a)();function I(){alert(k.formatMessage({id:"highlighters.error"}))}return g?Object(h.jsx)(J.a,{}):Object(h.jsx)($.OuterContainer,{open:a,children:Object(h.jsxs)($.InnerContainer,{children:[Object(h.jsxs)($.RowHeader,{children:[Object(h.jsxs)($.MarkerButton,{onClick:function(){c(!a)},"aria-label":k.formatMessage({id:"prefs.highlighters.button.ariaLabel"},{label:t.label,isShared:t.shared}),"aria-expanded":a,children:[Object(h.jsx)(p,{marker:t}),Object(h.jsx)($.MarkerLabel,{children:t.label})]}),a&&n&&b===Y.EDIT?Object(h.jsx)(s.Button,{inline:!0,naked:!0,size:"small",onClick:function(){j(Y.DELETE)},children:Object(h.jsx)(d.a,{id:"base.delete"})}):null]}),a&&b===Y.EDIT&&Object(h.jsx)(B,{markerToEdit:t,onCancel:function(){return c(!1)},onSave:function(e){x(!0),m(e).then((function(e){var t=e.ok;x(!1),c(!1),t||I()})),t.label!==e.label&&Object(Z.b)("preferences_highlighter_edit_name",{name:e.label}),t.color!==e.color&&Object(Z.b)("preferences_highlighter_edit_color",{color:e.color}),t.shared!==e.shared&&Object(Z.b)("preferences_highlighter_edit_shared",{shared:e.shared})}}),a&&b===Y.DELETE&&Object(h.jsx)(z,{marker:t,onDelete:function(){x(!0),C().then((function(e){e.ok||(x(!1),c(!1),I())}))},onCancel:function(){return j(Y.EDIT)}})]})})}!function(e){e[e.DELETE=0]="DELETE",e[e.EDIT=1]="EDIT"}(Y||(Y={}));var te=n(178);function ne(e){var t=e.onCancel,n=Object(te.a)(),c=n.createMarker,a=n.labelSortedMarkers,r=Object(l.useState)(!1),o=Object(i.a)(r,2),s=o[0],d=o[1],b=Object(u.a)();return s?Object(h.jsx)(J.a,{}):Object(h.jsx)(B,{onCancel:t,onSave:function(e){d(!0),c(e).then((function(e){var n=e.ok;d(!1),t(),n||alert(b.formatMessage({id:"highlighters.error"}))})),Object(Z.b)("preferences_highlighter_add",{count:a.length+1,color:e.color})}})}var ce,ie,ae,re,oe=n(92),le={Header:b.default.div(ce||(ce=Object(o.a)(["\n    margin-bottom: 24px;\n    font-weight: 500;\n  "]))),List:b.default.ul(ie||(ie=Object(o.a)(["\n    max-height: 50vh;\n  "]))),ListItem:b.default.li(ae||(ae=Object(o.a)(["\n    border-bottom: 1px solid ",";\n  "])),x.cloud.getShade(4)),AddButton:Object(b.default)(s.IconButton)(re||(re=Object(o.a)(["\n    float: right;\n  "])))};function se(e){var t=e.markers,n=Object(u.a)(),c=Object(oe.a)(),a=Object(l.useState)(""),r=Object(i.a)(a,2),o=r[0],s=r[1];return Object(h.jsxs)("div",{children:[Object(h.jsxs)(le.Header,{children:[Object(h.jsx)(d.a,{id:"prefs.markers.settings.myHighlighters"}),Object(h.jsx)(le.AddButton,{icon:Object(h.jsx)(j.Plus,{}),fullWidth:!0,rounded:!0,buttonType:"enclosed",solid:!0,size:"small",onClick:function(){s(""),c.buttonProps.onClick()},label:n.formatMessage({id:"highlighters.addNew"})})]}),c.contentProps.open&&Object(h.jsx)(ne,{onCancel:c.contentProps.onRequestClose}),Object(h.jsx)(le.List,{children:t.map((function(e){return Object(h.jsx)(le.ListItem,{children:Object(h.jsx)(ee,{marker:e,isExpanded:o===e.globalId,onToggleExpand:function(t){c.contentProps.open&&c.contentProps.onRequestClose(),s(t?e.globalId:"")},allowDelete:(null===t||void 0===t?void 0:t.length)>1})},e.globalId)}))})]})}var ue,de,be=n(10),je={Container:b.default.div(ue||(ue=Object(o.a)(["\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n  "]))),LabelText:b.default.div(de||(de=Object(o.a)(["\n    padding-right: ",";\n    font-weight: ",";\n  "])),(function(e){return e.hasExtras?"0":"15px"}),(function(e){return e.isSecondary?"400":"500"}))};function Oe(e){var t=e.labelId,n=e.isOn,c=e.onChange,i=e.disabled,a=e.labelExtra,r=e.isSecondary,o=Object(l.useRef)(Object(A.a)());return Object(h.jsxs)(je.Container,{children:[Object(h.jsx)(je.LabelText,{id:o.current,hasExtras:!!a,isSecondary:r,children:Object(h.jsx)(d.a,{id:t})}),a,Object(h.jsx)(s.Switch,{size:"small",labelledBy:o.current,onChange:c,defaultPressed:n,disabled:i})]})}var fe,he,ge,pe,xe=n(127),ve=n(95),me={OuterContainer:b.default.div(fe||(fe=Object(o.a)(["\n    position: relative;\n    height: 100%;\n  "]))),PreferencesOuter:b.default.div(he||(he=Object(o.a)(["\n    margin: auto -24px;\n    &:not(:last-child) {\n      border-bottom: 1px solid ",";\n      padding-bottom: 16px;\n      margin-bottom: 24px;\n    }\n  "])),x.cloud.getShade(4)),PreferencesInner:b.default.div(ge||(ge=Object(o.a)(["\n    margin: auto 24px;\n  "]))),Error:b.default.p(pe||(pe=Object(o.a)(["\n    font-size: 1.6rem;\n  "])))};function Ce(e){var t=e.fastHighlights,n=e.markerEditing,c=Object(te.a)(),i=c.loadStatus,a=c.labelSortedMarkers,r=k().loadStatus,o=Object(xe.a)(ve.a.PREFERENCES_FAST_HIGHLIGHT_ENABLED),l=o.setValue,s=o.value,u=Object(be.d)([i,r]);return u===be.a.FETCHING||u===be.a.WAITING?Object(h.jsx)(J.a,{}):u===be.a.ERROR?Object(h.jsx)(me.Error,{children:Object(h.jsx)(d.a,{id:"highlighters.error"})}):Object(h.jsxs)(me.OuterContainer,{children:[t&&Object(h.jsx)(me.PreferencesOuter,{children:Object(h.jsx)(me.PreferencesInner,{children:Object(h.jsx)(Oe,{labelId:"prefs.markers.settings.fastHighlght",isOn:s,onChange:l})})}),n&&Object(h.jsx)(se,{markers:a})]})}var Ee,Te,ke,Ie=n(1339),Se={Container:b.default.p(Ee||(Ee=Object(o.a)(["\n    padding-top: 24px;\n    text-align: center;\n    border-top: 1px solid ",";\n  "])),x.cloud.getShade(4))};function Me(){return Object(h.jsx)(Se.Container,{children:Object(h.jsx)(d.a,{id:"sharing.delay"})})}var ye={Container:b.default.div(Te||(Te=Object(o.a)(["\n    display: flex;\n    justify-content: space-between;\n    align-items: flex-end;\n    margin-bottom: 14px;\n  "]))),Header:b.default.h3(ke||(ke=Object(o.a)(["\n    font-weight: bold;\n  "])))};function we(e){var t=e.children,n=e.rightContent;return Object(h.jsxs)(ye.Container,{children:[Object(h.jsx)(ye.Header,{children:t}),n]})}var Ne=n(104),_e=Object(Ne.a)("sharing");function Re(e){return _e.getData(e)}function Le(e){return _e.getResultStatus(e)}var He,De,Fe,Ae,Pe,Be=n(62),Ge=n(78),ze=Object(Be.d)(Ge.a.GET_FOLLOWINGS),Ue=Object(Be.d)(Ge.a.FOLLOW),Ke=Object(Be.d)(Ge.a.UNFOLLOW);function Ve(){var e=Object(m.d)(Re),t=Object(m.d)(Le),n=Object(T.a)();return Object(l.useEffect)((function(){t===be.a.WAITING&&n(ze())}),[t,n]),{loadStatus:t,followings:e,follow:function(e){return n(function(e){return function(t,n){var c=Re(n());return t(Ue(e)).then((function(e){return e.ok?t(ze()):{ok:!1,error:He.UNKNOWN}})).then((function(e){var t=e.ok,n=e.data;return t?n.length===c.length?{ok:!1,error:He.ALREADY_FOLLOWING}:{ok:!0}:{ok:!1,error:He.UNKNOWN}}))}}(e))},unfollow:function(e){return n(function(e){return function(t){return t(Ke(e)).then((function(){return t(ze())}))}}(e))}}}!function(e){e.ALREADY_FOLLOWING="already-following",e.UNKNOWN="unknown"}(He||(He={}));var We={List:b.default.ul(De||(De=Object(o.a)(["\n    &:not(:last-child) {\n      margin-bottom: 19px;\n    }\n  "]))),ListItem:b.default.li(Fe||(Fe=Object(o.a)(["\n    display: inline-block;\n  "]))),Empty:b.default.p(Ae||(Ae=Object(o.a)(["\n    margin-bottom: 19px;\n  "]))),FollowingTag:Object(b.default)(s.Tag)(Pe||(Pe=Object(o.a)(["\n    margin: 0 8px 8px 0;\n  "])))};function qe(e){var t=e.onError,n=Ve(),c=Object(l.useState)({}),o=Object(i.a)(c,2),s=o[0],u=o[1],b=Object(v.b)();return 0===n.followings.length?Object(h.jsx)(We.Empty,{children:Object(h.jsx)(d.a,{id:"sharing.notFollowing"})}):Object(h.jsx)(We.List,{children:n.followings.map((function(e){return Object(h.jsx)(We.ListItem,{children:Object(h.jsx)(We.FollowingTag,{deletable:!0,onDelete:function(){return c=e,u(Object(a.a)(Object(a.a)({},s),{},Object(r.a)({},c.id,!0))),void n.unfollow(c.id).then((function(e){e.ok||t()}));var c},disabled:!!s[e.id]||!b.getProp("Sharing.showUnsubscribe"),outline:!0,tagType:"basic",children:e.full_name})},e.id)}))})}var Xe,Ye,Je,Qe,Ze,$e=n(82);function et(e,t){switch(t.type){case Ze.SET_PROCESSING:return Object(a.a)(Object(a.a)({},e),{},{loading:!0,open:!1});case Ze.SET_OK:return Object(a.a)(Object(a.a)({},e),{},{loading:!1,open:!1,error:null,email:""});case Ze.SET_ERROR:return Object(a.a)(Object(a.a)({},e),{},{loading:!1,open:!0,error:t.error});case Ze.UPDATE_EMAIL:return Object(a.a)(Object(a.a)({},e),{},{email:t.value,error:null});case Ze.OPEN_FORM:return Object(a.a)(Object(a.a)({},e),{},{open:!0,error:null,email:""});case Ze.CLOSE_FORM:return Object(a.a)(Object(a.a)({},e),{},{open:!1,error:null,email:""});default:return e}}!function(e){e[e.UPDATE_EMAIL=0]="UPDATE_EMAIL",e[e.SET_PROCESSING=1]="SET_PROCESSING",e[e.SET_ERROR=2]="SET_ERROR",e[e.SET_OK=3]="SET_OK",e[e.OPEN_FORM=4]="OPEN_FORM",e[e.CLOSE_FORM=5]="CLOSE_FORM"}(Ze||(Ze={}));var tt,nt={TextFieldLine:b.default.div(Xe||(Xe=Object(o.a)(["\n    display: flex;\n    margin-bottom: -20px;\n  "]))),TextFieldContainer:b.default.div(Ye||(Ye=Object(o.a)(["\n    flex: 1;\n  "]))),TextFieldLabel:b.default.label(Je||(Je=Object(o.a)(["\n    display: inline-block;\n    margin-bottom: 7px;\n    font-weight: 500;\n    font-size: 1.5rem;\n  "]))),EnterEmail:b.default.p(Qe||(Qe=Object(o.a)(["\n    &:not(:last-child) {\n      padding-bottom: 19px;\n    }\n  "])))};function ct(e){var t=e.onError,n=Ve().follow,c=Object(u.a)(),a=Object(l.useRef)(null),r=Object(l.useRef)(Object(A.a)()),o=Object(l.useReducer)(et,{open:!1,email:"",loading:!1,error:null}),b=Object(i.a)(o,2),j=b[0],O=j.open,f=j.email,g=j.loading,p=j.error,x=b[1];Object(l.useEffect)((function(){var e;null===(e=a.current)||void 0===e||e.validate()}),[p]);var v=Object(l.useCallback)((function(){return p===He.ALREADY_FOLLOWING?c.formatMessage({id:"sharing.userAlreadyBeingFollowed"}):void 0}),[p,c]);return g?Object(h.jsx)(J.a,{}):Object(h.jsxs)("div",{children:[Object(h.jsx)(nt.EnterEmail,{children:Object(h.jsx)(d.a,{id:"sharing.enterEmailToFollow",values:{a:function(e){return Object(h.jsx)(s.Button,{inline:!0,onClick:function(){return x({type:Ze.OPEN_FORM})},"aria-expanded":O,children:e})}}})}),O&&Object(h.jsxs)(s.Form,{onSubmit:function(e){e.preventDefault(),x({type:Ze.SET_PROCESSING}),n(f).then((function(e){var n=e.ok,c=e.error;n?x({type:Ze.SET_OK}):(x({type:Ze.SET_ERROR,error:c}),c&&c!==He.ALREADY_FOLLOWING&&t())})),Object(Z.b)("preferences_sharing_email")},children:[Object(h.jsx)(nt.TextFieldLabel,{htmlFor:r.current,children:Object(h.jsx)(d.a,{id:"base.emailAddress"})}),Object(h.jsxs)(nt.TextFieldLine,{children:[Object(h.jsx)(nt.TextFieldContainer,{children:Object(h.jsx)(s.TextField,{ref:a,type:"email",fullWidth:!0,onChange:function(e){x({type:Ze.UPDATE_EMAIL,value:e.currentTarget.value})},value:f,pattern:$e.a,required:!0,validate:v,id:r.current})}),Object(h.jsx)(s.Button,{naked:!0,color:"neutral",onClick:function(){x({type:Ze.CLOSE_FORM})},type:"button",children:Object(h.jsx)(d.a,{id:"base.cancel"})}),Object(h.jsx)(s.Button,{type:"submit",children:Object(h.jsx)(d.a,{id:"sharing.follow"})})]})]})]})}var it={Container:b.default.div(tt||(tt=Object(o.a)(["\n    border-top: 1px solid ",";\n    padding: 24px 0;\n  "])),x.cloud.getShade(4))};function at(){var e=Object(u.a)(),t=Ve().loadStatus,n=Object(v.b)(),c=Object(l.useState)(!1),a=Object(i.a)(c,2),r=a[0],o=a[1];if(!n.getProp("Sharing.showFollowings")&&!n.getProp("Sharing.subscribeViaEmail"))return null;return Object(h.jsxs)(it.Container,{children:[Object(h.jsx)(we,{children:Object(h.jsx)(d.a,{id:"sharing.imFollowing"})}),t===be.a.WAITING||t===be.a.FETCHING?Object(h.jsx)(J.a,{}):t===be.a.ERROR?Object(h.jsx)(d.a,{id:"sharing.fetchError"}):Object(h.jsxs)(h.Fragment,{children:[n.getProp("Sharing.showFollowings")&&Object(h.jsx)(qe,{onError:function(){return o(!0)}}),n.getProp("Sharing.subscribeViaEmail")&&Object(h.jsx)(ct,{onError:function(){return o(!0)}})]}),Object(h.jsx)(s.Toast,{open:r,toastClose:function(){return o(!1)},toastTitleText:e.formatMessage({id:"sharing.fetchErrorTitle"}),toastDescriptionText:e.formatMessage({id:"sharing.fetchErrorDescription"}),toastType:"error"})]})}var rt=n(210),ot=n(1263);var lt,st=n(71),ut={Container:b.default.div(lt||(lt=Object(o.a)(["\n    padding-bottom: 24px;\n  "])))};function dt(){var e=Object(u.a)(),t=function(){var e=Object(m.d)(C.k);return{loadStatus:Object(ot.a)(),count:e}}(),n=t.count,c=t.loadStatus,a=Object(st.a)().userInfo,r=Object(l.useState)(!1),o=Object(i.a)(r,2),d=o[0],b=o[1];return Object(h.jsxs)(ut.Container,{children:[Object(h.jsx)(we,{rightContent:Object(h.jsx)(s.Button,{inline:!0,iconStart:Object(h.jsx)(j.Link,{}),onClick:function(){var e="https://".concat(window.location.host,"/home/subscribe/").concat(encodeURIComponent(a.email));Object(rt.a)(e).then((function(){return b(!0)}))},"data-interaction-id":"preferences_sharing_copy_link",children:e.formatMessage({id:"sharing.copyLink"})}),children:function(){var t=e.formatMessage({id:"sharing.mySharedHighlighters"});return c!==be.a.OK?t:"".concat(t," (").concat(n,")")}()}),Object(h.jsx)("p",{children:e.formatMessage({id:"sharing.instrux"})}),Object(h.jsx)(s.Toast,{open:d,toastClose:function(){return b(!1)},toastTitleText:e.formatMessage({id:"base.copied"}),toastType:"success"})]})}function bt(){return Object(h.jsxs)("div",{children:[Object(h.jsx)(dt,{}),Object(h.jsx)(at,{}),Object(h.jsx)(Me,{})]})}var jt,Ot,ft,ht,gt,pt,xt,vt=n(190),mt=n(83),Ct=n(107),Et=n(1239),Tt=n(1456),kt=n(1457),It={FeatureOnOffContainer:b.default.div(jt||(jt=Object(o.a)(["\n    font-weight: 500;\n    padding-top: 19px;\n    padding-bottom: 10px;\n    border-bottom: 1px solid ",";\n  "])),x.cloud.getShade(4)),NotificationsHeader:b.default.div(Ot||(Ot=Object(o.a)(["\n    font-size: 1.5rem;\n    font-weight: 500;\n    padding-top: 27px;\n  "]))),NotificationItem:b.default.div(ft||(ft=Object(o.a)(["\n    padding-top: 10px;\n  "]))),HowItWorksButton:Object(b.default)(s.Button)(ht||(ht=Object(o.a)(["\n    margin-left: -2px; // left align text due to border\n  "]))),Intro:b.default.p(gt||(gt=Object(o.a)(["\n    margin-bottom: 6px;\n  "]))),WarningText:b.default.div(pt||(pt=Object(o.a)(["\n    font-size: 1.4rem;\n    font-style: italic;\n    line-height: 2rem;\n  "]))),InfoMessage:Object(b.default)(vt.b)(xt||(xt=Object(o.a)(["\n    margin-right: auto;\n    margin-left: 2px;\n  "])))};function St(){var e=Object(u.a)(),t=Object(Ct.a)(mt.a.COACH_ME_DISABLED),n=t.currentVal,c=t.setVal,i=Object(Ct.a)(mt.a.COACH_ME_NUDGES_DISABLED),a=i.currentVal,r=i.setVal,o=Object(Ct.a)(mt.a.COACH_ME_TAG_DISABLED),s=o.setVal,b=o.currentVal,j=Object(Et.a)().isCoachMeDeactivated;return Object(l.useEffect)((function(){b||s(!0)}),[b,s]),Object(h.jsxs)("div",{children:[Object(h.jsx)(It.Intro,{children:Object(h.jsx)(d.a,{id:"checkpoint.settings.intro"})}),Object(h.jsx)(It.HowItWorksButton,{inline:!0,href:e.formatMessage({id:"checkpoint.settings.moreInfoLink"}),children:Object(h.jsx)(d.a,{id:"base.learnButton"})}),Object(h.jsx)(It.FeatureOnOffContainer,{children:Object(h.jsx)(Oe,{labelId:"checkpoint.settings.featureEnable",isOn:!n&&!j,disabled:j,onChange:function(e){c(!e),Object(Z.b)(e?"enrichments_enabled":"enrichments_disabled")}})}),j?Object(h.jsx)(kt.a,{icon:Object(h.jsx)(Tt.a,{}),children:Object(h.jsx)(It.WarningText,{children:Object(h.jsx)(d.a,{id:"checkpoint.settings.publisherDeactivated"})})}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(It.NotificationsHeader,{children:Object(h.jsx)(d.a,{id:"checkpoint.settings.notificationSettings"})}),Object(h.jsx)("div",{children:Object(h.jsx)(It.NotificationItem,{children:Object(h.jsx)(Oe,{labelId:"checkpoint.settings.nudgeEnable",labelExtra:Object(h.jsx)(It.InfoMessage,{label:e.formatMessage({id:"base.moreInfo"}),message:e.formatMessage({id:"checkpoint.settings.nudgeEnableHelp"})}),isOn:!a,onChange:function(e){r(!e),Object(Z.b)(e?"enrichment_nudges_enabled":"enrichment_nudges_disabled")},disabled:n,isSecondary:!0})})})]})]})}var Mt=n(187),yt=n(1454),wt=n(1450),Nt=n(1452),_t=n(1453),Rt=n(1451),Lt=n(1218),Ht=n(197),Dt=n(196);var Ft,At,Pt,Bt=n(69);!function(e){e.CONTENT_CONTROLS="contentControls",e.HIGHLIGHTERS="highlighters",e.SHARING="sharing",e.CHECKPOINT="checkpoint"}(Pt||(Pt={}));var Gt={PanelContainer:b.default.div(Ft||(Ft=Object(o.a)(["\n    padding-top: 18px;\n  "])))},zt=(At={},Object(r.a)(At,Pt.CONTENT_CONTROLS,"preferences_CC_open"),Object(r.a)(At,Pt.HIGHLIGHTERS,"preferences_highlighter_settings"),At);function Ut(e){var t=e.open,n=e.onRequestClose,c=e.selectedTab,r=Object(u.a)(),o=Object(v.b)().getProp("Sharing.enabled"),d=Object(v.b)().getProp("Highlights.enabled"),b=Object(v.b)().getProp("Highlights.FastHighlighting.enabled"),j=Object(v.b)().getProp("Highlights.MarkerManagement.enabled"),O=Object(Mt.a)(),f=Object(Et.a)().isCoachMeDeactivated,g=Object(Ct.a)(mt.a.COACH_ME_TAG_DISABLED).currentVal;!function(e){var t=Object(yt.a)().currentFontSize,n=Object(wt.a)().currentFont,c=Object(Nt.a)().currentMargin,i=Object(_t.a)().currentLineHeight,r=Object(Rt.a)().currentMode,o=Object(Lt.a)().currentReaderView,s=(0,Object(Dt.a)().isEnabled)(Ht.a.PAGINATION),u=Object(l.useRef)(null),d=Object(l.useCallback)((function(){return Object(a.a)({CC_size:t.value,CC_font:n.value,CC_margin:c.value,CC_height:i.value,CC_mode:r.value},s&&{CC_reader_view:o.value})}),[t.value,n.value,c.value,i.value,r.value,s,o.value]),b=Object(l.useCallback)((function(){u.current||(u.current=d())}),[d]),j=Object(l.useCallback)((function(){if(u.current){var e=d(),t={};Object.keys(u.current).forEach((function(n){u.current[n]!==e[n]&&(t[n]=e[n])})),u.current=null,Object.keys(t).length>0&&Object(Z.b)("preferences_CC_selected",t)}}),[d]);Object(l.useEffect)((function(){e?b():j()}),[e,b,j])}(t);var p=[{heading:r.formatMessage({id:"prefs.displayOptions"})}],x=[{content:Object(h.jsx)(Ie.a,{}),panelKey:Pt.CONTENT_CONTROLS}];d&&(b||j)&&(p.push({heading:r.formatMessage({id:"prefs.highlighters"})}),x.push({content:Object(h.jsx)(Ce,{fastHighlights:b,markerEditing:j}),panelKey:Pt.HIGHLIGHTERS}),o&&(p.push({heading:r.formatMessage({id:"prefs.sharing"})}),x.push({content:Object(h.jsx)(bt,{}),panelKey:Pt.SHARING}))),(O||f)&&(p.push({heading:r.formatMessage({id:"prefs.checkpoint"}),notification:!g,notificationText:r.formatMessage({id:"base.new"})}),x.push({content:Object(h.jsx)(St,{}),panelKey:Pt.CHECKPOINT}));var m=x.map((function(e){return Object(a.a)(Object(a.a)({},e),{},{content:Object(h.jsx)(Gt.PanelContainer,{children:e.content})})})),C=x.findIndex((function(e){return e.panelKey===c})),E=Object(l.useState)(C),T=Object(i.a)(E,2),k=T[0],I=T[1],S=Object(l.useCallback)((function(e){I(e);var t=x[e].panelKey;zt[t]&&Object(Z.b)(zt[t])}),[x]);return Object(h.jsx)(Bt.b,{type:Bt.a.Vstui,open:t,onRequestClose:n,title:r.formatMessage({id:"prefs.readerPreferences"}),darkHeader:!0,size:"large",children:1===p.length?x[0].content:Object(h.jsx)(s.Tabs,{selectedIndex:k,onSelect:S,tabData:p,tabPanel:m,tabPadding:"none"})})}},1293:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var c=n(1207),i=n(89);function a(){return Object(c.a)(i.d)}},1295:function(e,t,n){"use strict";function c(e){return"h-".concat(e.syncId)}function i(e){return"e-".concat(e.id)}n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return i}))},1296:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var c=n(54),i=(n(0),n(1));function a(){return Object(i.jsx)(c.Icon,{width:16,height:17,children:Object(i.jsxs)("g",{fill:"none",fillRule:"evenodd",children:[Object(i.jsx)("path",{d:"M2.667.889h10.666A2.667 2.667 0 0116 3.556v6.222a2.667 2.667 0 01-2.667 2.666h-.889v2.792a.764.764 0 01-1.24.596L6.97 12.444H2.667A2.667 2.667 0 010 9.778V3.556A2.667 2.667 0 012.667.889",fill:"currentColor"}),Object(i.jsx)("path",{d:"M2.667 2.667a.89.89 0 00-.89.889v6.222c0 .49.399.889.89.889h4.928l.487.389 2.585 2.07v-2.459h2.667a.89.89 0 00.888-.89V3.557a.89.89 0 00-.889-.89H2.667",fill:"#FFF"}),Object(i.jsx)("path",{fill:"currentColor",d:"M12.444 5.333H3.556v-.889h8.888zM12.444 8H3.556v-.889h8.888z"})]})})}},1300:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return i}));var c={FRONT:"Front",BACK:"Back"},i=1024},1301:function(e,t,n){"use strict";var c;n.d(t,"a",(function(){return c})),function(e){e.FLASHCARDS="flashcards",e.ANNOTATIONS="annotations",e.BOOKMARKS="bookmarks"}(c||(c={}))},1344:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var c=n(1377),i=n(62),a=n(78),r=Object(i.d)(a.a.LOOKUP_TERM),o=n(68),l=n(0);function s(){var e=Object(o.a)(),t=Object(c.a)().locale;return Object(l.useMemo)((function(){return{isSupported:"en-GB"===t||"en-US"===t,lookupTerm:function(t){return e(r(t)).then((function(e){var t=e.ok,n=e.data;return t&&n.results[0]&&n.results[0].senses[0].definition.join("")?n.results[0].senses[0].definition.join(""):null}))}}}),[t,e])}},1345:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var c=n(68),i=n(0),a=n(62),r=n(63),o=n(98),l=Object(a.e)(r.a.SCROLL_TO_Y),s=n(58);function u(){var e=Object(c.a)(),t=Object(s.d)(o.e),n=Object(i.useCallback)((function(t){e(function(e){return function(t,n){var c=Object(o.e)(n());return t(l(c+e))}}(t))}),[e]);return Object(i.useMemo)((function(){return{scrollYByOffset:n,scrollTop:t}}),[n,t])}},1456:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var c=n(54),i=(n(0),n(1));function a(){return Object(i.jsx)(c.Icon,{width:20,height:18,children:Object(i.jsxs)("g",{fill:"#9A6F07","fill-rule":"evenodd",children:[Object(i.jsx)("path",{d:"M10 5.252a1 1 0 0 1 1 1v4a1 1 0 1 1-2 0v-4a1 1 0 0 1 1-1M11.25 13.502a1.25 1.25 0 1 1-2.5 0 1.25 1.25 0 0 1 2.5 0"}),Object(i.jsx)("path",{d:"M10 0c-.865 0-1.729.428-2.224 1.284L.348 14.15c-.989 1.712.247 3.852 2.223 3.852H17.43c1.976 0 3.212-2.14 2.223-3.852L12.224 1.284A2.545 2.545 0 0 0 10 0m0 2c.15 0 .356.049.492.284L17.92 15.15a.54.54 0 0 1 0 .568.54.54 0 0 1-.49.284H2.57a.54.54 0 0 1-.49-.284.54.54 0 0 1 0-.568L9.507 2.284A.543.543 0 0 1 10 2"})]})})}},1457:function(e,t,n){"use strict";var c,i,a=n(55),r=(n(0),n(53)),o=n(1),l={Container:r.default.div(c||(c=Object(a.a)(["\n    margin: 12px 0;\n    display: flex;\n  "]))),Icon:r.default.div(i||(i=Object(a.a)(["\n    margin-right: 8px;\n  "])))};t.a=function(e){var t=e.icon,n=e.children;return Object(o.jsxs)(l.Container,{children:[Object(o.jsx)(l.Icon,{children:t}),Object(o.jsx)("div",{children:n})]})}},1459:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var c=n(0),i=n(58),a=n(10),r=n(1197),o=n(180);function l(){var e=Object(i.c)(),t=Object(i.d)(o.g),n=Object(i.d)(o.b),l=Object(i.d)(o.c);return Object(c.useEffect)((function(){t===a.a.OK&&n.length&&n.some((function(e){return!l[e]}))&&e(Object(r.b)({enrichmentIds:n}))}),[t,n,l,e]),{enrichmentStatus:l,loadEnrichmentStatus:function(t){!function(t){e(Object(r.b)({enrichmentIds:t}))}(t)}}}},1460:function(e,t,n){"use strict";var c,i=n(55),a=(n(0),n(53)),r=n(61),o=n(1),l={Button:a.default.button(c||(c=Object(i.a)(["\n    position: absolute;\n    text-decoration: underline;\n    border-radius: 4px;\n    color: ",";\n    font-size: 13px;\n    z-index: 9999;\n    padding: 8px;\n    text-align: center;\n    :not(:focus) {\n      ",";\n    }\n    background-color: white;\n    outline: none;\n    border: 2px solid ",";\n  "])),Object(r.i)(6),r.l,Object(r.i)(6))};t.a=function(e){var t=e.onClick,n=e.className,c=e.children;return Object(o.jsx)(l.Button,{className:n,onClick:t,children:c})}},1461:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var c,i=n(55),a=(n(0),n(53)),r=n(1462),o=n(1),l={StatusText:a.default.div(c||(c=Object(i.a)(["\n    color: ",";\n  "])),(function(e){return Object(r.b)(e.status)}))};function s(e){var t=e.enrichmentStatus,n=e.className;return Object(o.jsx)(l.StatusText,{status:t,className:n})}},1462:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o}));var c=n(106),i=n(61),a=n(57);function r(e){switch(e){case c.b.COMPLETE:return Object(i.i)(6);case c.b.INCOMPLETE:return a.cloud.getShade(6);case c.b.CORRECT:return a.green.getShade(6);case c.b.INCORRECT:return a.red.getShade(6);default:return a.cloud.getShade(10)}}function o(e){return e===c.b.INCOMPLETE?a.cloud.getShade(5):r(e)}},1463:function(e,t,n){"use strict";var c,i=n(55),a=n(53),r=n(57),o=a.default.div(c||(c=Object(i.a)(["\n  background-color: ",";\n  font-size: 1rem;\n  font-weight: bold;\n  box-sizing: content-box;\n  border: 2px solid white;\n  width: 13px;\n  height: 13px;\n  border-radius: 100%;\n  color: white;\n  display: flex;\n  vertical-align: middle;\n  justify-content: space-around;\n  padding-top: 1px;\n  position: absolute;\n  top: -3px;\n  right: -4px;\n"])),r.cloud.getShade(9));t.a=o},1464:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var c=n(9),i=n(0),a=n(107),r=n(83),o=n(187);function l(){var e=Object(i.useState)(!1),t=Object(c.a)(e,2),n=t[0],l=t[1],s=Object(a.a)(r.a.COACH_ME_ONBOARDING_DISABLED),u=s.currentVal,d=s.setVal,b=Object(o.a)();Object(i.useEffect)((function(){!0!==u&&b&&l(!0)}),[b,u]);return{showOnboarding:n,closeOnboarding:function(){d(!0),l(!1)}}}},1472:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));var c,i,a,r=n(55),o=(n(0),n(1377)),l=n(53),s=n(69),u=n(1);!function(e){e[e.OKCancel=0]="OKCancel",e[e.DeleteCancel=1]="DeleteCancel"}(i||(i={})),function(e){e[e.Cancel=0]="Cancel",e[e.OK=1]="OK",e[e.Delete=2]="Delete"}(a||(a={}));var d={MessageContent:l.default.div(c||(c=Object(r.a)([""])))};t.c=function(e){var t,n,c=Object(o.a)(),r=e.open,l=e.titleId,b=e.messageId,j=e.onRequestClose,O=e.size,f=void 0===O?"small":O,h=e.requireInteraction,g=void 0===h||h,p="",x="";switch(e.type){case i.OKCancel:p=c.formatMessage({id:"base.ok"}),x=c.formatMessage({id:"base.cancel"}),t=function(){return e.onResponse(a.OK)},n=function(){return e.onResponse(a.Cancel)};break;case i.DeleteCancel:p=c.formatMessage({id:"base.delete"}),x=c.formatMessage({id:"base.cancel"}),t=function(){return e.onResponse(a.Delete)},n=function(){return e.onResponse(a.Cancel)}}var v=function(){return setTimeout((function(){return j()}),1)};return Object(u.jsx)(s.b,{type:s.a.Vstui,open:r,requireInteraction:g,primaryActionButton:{label:p,onClick:function(){t(),v()}},secondaryActionButton:{label:x,onClick:function(){n(),v()}},onRequestClose:v,size:f,title:c.formatMessage({id:l}),children:Object(u.jsx)(d.MessageContent,{children:c.formatMessage({id:b})})})}},1473:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var c,i,a,r=n(55),o=n(0),l=n(101),s=n(57),u=n(53),d=n(1377),b=n(15),j=n(177),O=n(67),f=n(1),h={Header:u.default.h3(c||(c=Object(r.a)(["\n    color: ",";\n    margin: 14px 0 0 16px;\n  "])),s.cloud.getShade(6)),OverflowContainer:u.default.div(i||(i=Object(r.a)(["\n    display: inline-block;\n    max-height: 212px;\n    overflow-y: auto;\n    ul {\n      // to prevent double scrollbar within List and OverflowContainer\n      max-height: none;\n    }\n  "]))),DeckContainer:u.default.div(a||(a=Object(r.a)(["\n    width: 200px;\n    display: inline-block;\n  "])))};function g(e){var t=e.decks,n=e.callback,c=void 0===n?function(e){}:n,i=e.close,a=void 0===i?function(){}:i,r=Object(d.a)(),s=Object(o.useRef)(null),u=r.formatMessage({id:"contextMenu.createFlashcard"}),g=Object(O.a)(),p=Object(o.useRef)(null);return Object(o.useEffect)((function(){s.current&&(s.current.setAttribute("tabindex","-1"),s.current.focus())}),[]),Object(f.jsxs)("div",{role:"dialog","aria-labelledby":g,ref:s,children:[Object(f.jsx)(h.Header,{id:g,children:u}),Object(f.jsx)(h.OverflowContainer,{children:Object(f.jsx)(h.DeckContainer,{ref:p,onKeyDown:function(e){if(p.current){var t,n=null===(t=p.current.querySelector("ul"))||void 0===t?void 0:t.lastElementChild,c=e.target;e.shiftKey||e.keyCode!==j.d||c.closest("li")!==n||a()}},children:Object(f.jsx)(l.List,{data:[{listItems:function(){var e=[];return null===t||void 0===t||t.forEach((function(t){e.push({onClick:function(){c(t.uuid),Object(b.b)("workbook_flashcards_deck_reader")},text:t.title})})),e}()}]})})})]})}},1474:function(e,t,n){"use strict";n.d(t,"a",(function(){return me}));var c,i,a,r,o,l,s,u,d=n(9),b=n(55),j=n(0),O=n(53),f=n(1377),h=n(196),g=n(14),p=n(197),x=n(10),v=n(1478),m=n(1182),C=n(1465),E=n(178),T=n(1241),k=n(1238),I=n(57),S=n(59),M=function(e){return[{unicode:"\u2764\ufe0f",label:e.formatMessage({id:"emoji.heart"})},{unicode:"\ud83d\udc40",label:e.formatMessage({id:"emoji.eyes"})},{unicode:"\ud83d\ude00",label:e.formatMessage({id:"emoji.grinning"})},{unicode:"\ud83e\udd14",label:e.formatMessage({id:"emoji.thinking"})},{unicode:"\ud83d\ude31",label:e.formatMessage({id:"emoji.scared"})}]},y=O.default.div(c||(c=Object(b.a)(['\n  content: "";\n  display: block;\n  width: 100%;\n  border-bottom: 1px solid ',";\n"])),I.cloud.getShade(4)),w=n(1472),N=n(172),_=n(113),R=n(1),L={Container:O.default.div(i||(i=Object(b.a)(["\n    overflow-y: auto;\n    padding: 10px 10px 0 10px;\n    display: inline-block;\n  "]))),MarkerName:O.default.div(a||(a=Object(b.a)(["\n    margin: 0 0 2px 4px;\n    font-weight: bold;\n    color: ",";\n    font-size: 1.2rem;\n    height: 14px;\n  "])),I.cloud.getShade(6)),OverflowContainer:O.default.div(r||(r=Object(b.a)(["\n    max-height: 175px;\n    overflow-y: auto;\n  "]))),MarkersContainer:O.default.div(o||(o=Object(b.a)(["\n    width: 217px;\n    display: inline-block;\n  "]))),HighlightButton:O.default.button(l||(l=Object(b.a)(["\n    box-sizing: content-box;\n    position: relative;\n    border-radius: 50%;\n    background-color: ",";\n    width: 25px;\n    height: 25px;\n    margin: 2px 4px;\n    border: solid "," 1px;\n    display: inline-flex;\n    justify-content: center;\n    align-items: center;\n    &:hover {\n      border-width: 3px;\n      margin: 0 2px;\n    }\n  "])),(function(e){return e.bgColor}),(function(e){return e.borderColor})),StyledGroup:Object(O.default)(S.Group)(s||(s=Object(b.a)(["\n    opacity: 0.6;\n    position: absolute;\n    width: 16px;\n    height: 16px;\n  "]))),SelectedMarker:O.default.div(u||(u=Object(b.a)(["\n    position: absolute;\n    z-index: 4;\n    background-color: rgba(0, 0, 0, 0.6);\n    border-radius: 50%;\n    width: inherit;\n    height: inherit;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    color: #ffffff;\n  "])))};function H(e){var t=e.selectedHighlight,n=e.closeMenu,c=Object(E.a)().markers,i=Object(T.a)(null===t||void 0===t?void 0:t.syncId),a=i.updateMarker,r=i.highlightSelection,o=i.deleteHighlight,l=i.markerForHighlight,s=Object(j.useState)(t?null===l||void 0===l?void 0:l.label:void 0),u=Object(d.a)(s,2),b=u[0],O=u[1],h=Object(j.useState)(!1),p=Object(d.a)(h,2),x=p[0],v=p[1],m=Object(j.useState)(c),C=Object(d.a)(m,2),k=C[0],I=C[1],M=Object(f.a)(),H=Object(g.b)();Object(j.useEffect)((function(){t&&(O(null===l||void 0===l?void 0:l.label),I(Object(N.a)(c,l)))}),[t,l,c]);var D=function(e){return t?t.marker.globalId===e.globalId?M.formatMessage({id:"contextMenu.deleteHighlight"}):M.formatMessage({id:"contextMenu.changeColor"},{color:e.label}):M.formatMessage({id:"contextMenu.addHighlight"},{color:e.label})};return Object(R.jsx)(R.Fragment,{children:H.getProp("Highlights.enabled")&&Object(R.jsxs)(R.Fragment,{children:[Object(R.jsxs)(L.Container,{children:[Object(R.jsx)(L.MarkerName,{children:b}),Object(R.jsx)(L.OverflowContainer,{children:Object(R.jsx)(_.a,{children:Object(R.jsx)(L.MarkersContainer,{children:k.map((function(e){return Object(R.jsxs)(L.HighlightButton,{"aria-label":D(e),bgColor:e.vstColor,borderColor:e.vstColorDark,onMouseOver:function(){return O(e.label)},onMouseLeave:function(){return O(t?null===l||void 0===l?void 0:l.label:void 0)},onClick:function(){t?t.marker.globalId===e.globalId?t.hasNote?v(!0):(o(),n()):(a(e.globalId),n()):(r(e.globalId),n())},children:[e.shared?Object(R.jsx)(L.StyledGroup,{}):null,(null===t||void 0===t?void 0:t.marker.globalId)===e.globalId?Object(R.jsx)(L.SelectedMarker,{children:Object(R.jsx)(S.XSmall,{})}):null]},e.globalId)}))})})}),Object(R.jsx)(y,{})]}),Object(R.jsx)(w.c,{type:w.a.DeleteCancel,open:x,titleId:"contextMenu.confirmDeleteTitle",messageId:"contextMenu.confirmDeleteMessage",onRequestClose:function(){return v(!1)},onResponse:function(e){e===w.b.Delete&&(o(),v(!1),n())}})]})})}var D=n(58),F=n(118),A=n(1192),P=n(201),B=n(68);var G,z,U,K,V,W=n(61),q={Container:O.default.div(G||(G=Object(b.a)(["\n    padding: 0 10px;\n  "]))),EmojiList:O.default.div(z||(z=Object(b.a)(["\n    display: flex;\n    justify-content: space-evenly;\n    align-items: center;\n    font-size: 3rem;\n    margin-top: 5px;\n    margin-bottom: 5px;\n    height: 40px;\n    ","\n  "])),W.c),EmojiButton:O.default.button(U||(U=Object(b.a)(["\n    margin: 0 5px;\n    display: flex;\n    width: 35px;\n    height: 35px;\n    justify-content: center;\n    align-items: center;\n  "]))),SelectedEmoji:O.default.div(K||(K=Object(b.a)(["\n    position: absolute;\n    background-color: rgba(0, 0, 0, 0.6);\n    border-radius: 50%;\n    width: 35px;\n    height: 35px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  "]))),X:Object(O.default)(S.XLarge)(V||(V=Object(b.a)(["\n    color: #ffffff;\n  "])))};function X(e){var t=e.selectedHighlight,n=e.closeMenu,c=Object(f.a)(),i=Object(g.b)().getProp("Highlights.enabled"),a=Object(h.a)().isEnabled,r=function(e){var t=Object(D.d)(F.f),n=Object(B.a)(),c=Object(j.useCallback)((function(e){if(0===t.length)return n(Object(A.a)({label:F.a})).then((function(t){var c=t.data.globalId;return n(Object(P.d)({markerId:c,noteText:e}))}));var c=t[0].globalId;n(Object(P.d)({markerId:c,noteText:e}))}),[n,t]),i=Object(j.useCallback)((function(t){n(Object(P.f)({syncId:e,dataFields:t}))}),[n,e]);return{addEmojiToCurrentSelection:c,changeEmoji:Object(j.useCallback)((function(e){return i({noteText:e})}),[i]),deleteEmoji:Object(j.useCallback)((function(){return n(Object(P.a)({syncId:e}))}),[n,e])}}(null===t||void 0===t?void 0:t.syncId),o=r.addEmojiToCurrentSelection,l=r.changeEmoji,s=r.deleteEmoji,u=function(e){return t?t.noteText===e.unicode?c.formatMessage({id:"contextMenu.deleteEmoji"}):c.formatMessage({id:"contextMenu.changeEmoji"},{emoji:e.label}):c.formatMessage({id:"contextMenu.addEmoji"},{emoji:e.label})};return i&&a(p.a.EMOJI)?Object(R.jsxs)(q.Container,{children:[Object(R.jsx)(q.EmojiList,{children:M(c).map((function(e){return function(e){return Object(R.jsxs)(q.EmojiButton,{onClick:function(){t?t.noteText===e.unicode?s():l(e.unicode):o(e.unicode),n()},"aria-label":u(e),children:[e.unicode,(null===t||void 0===t?void 0:t.noteText)===e.unicode?Object(R.jsx)(q.SelectedEmoji,{children:Object(R.jsx)(q.X,{})}):null]},e.label)}(e)}))}),Object(R.jsx)(y,{})]}):null}var Y,J,Q=n(1378),Z=n(1344),$=n(85),ee=n(69);function te(e){var t=e.open,n=e.closeDialog,c=e.defineText,i=Object(Z.a)().lookupTerm,a=Object(j.useState)(""),r=Object(d.a)(a,2),o=r[0],l=r[1];return Object(j.useEffect)((function(){l(""),t&&i(c).then((function(e){l(e)}))}),[t,c,i]),Object(R.jsx)(ee.b,{type:ee.a.Vstui,onRequestClose:n,size:"small",open:t,title:t?c:"",children:""===o?Object(R.jsx)($.a,{}):null===o?Object(R.jsx)(Q.a,{id:"dictionary-lookup.no-def-found"}):Object(R.jsx)("p",{children:o})})}var ne={Container:O.default.div(Y||(Y=Object(b.a)(["\n    padding: 10px 14px;\n    font-size: 13px;\n    font-weight: bold;\n    color: ",";\n    display: flex;\n    align-items: center;\n  "])),I.cloud.getShade(7)),Color:O.default.div(J||(J=Object(b.a)(["\n    background-color: ",";\n    width: 24px;\n    height: 20px;\n    margin-right: 7px;\n    font-weight: bold;\n    align-items: center;\n    display: flex;\n    justify-content: center;\n    border-radius: 4px;\n    color: ",";\n  "])),(function(e){return e.color}),I.cloud.getShade(10))};function ce(e){var t=e.highlight,n=Object(f.a)();return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsxs)(ne.Container,{children:[Object(R.jsx)(ne.Color,{color:t.vstColor,children:t.authorInitials}),n.formatMessage({id:"contextMenu.sharedBy"},{name:t.authorName})]}),Object(R.jsx)(y,{})]})}var ie,ae=n(1473),re=n(101),oe=n(54),le=n(210),se=n(84),ue=n(1295),de=n(188),be=n(1301),je=n(15),Oe=n(1300),fe=n(66),he=n(32),ge=n(89),pe=n(74),xe=n(87),ve={Menu:Object(O.default)(oe.Card)(ie||(ie=Object(b.a)(["\n    left: ","px;\n    ","\n    position: absolute;\n    z-index: 500;\n  "])),(function(e){return e.location.left}),(function(e){var t=e.location;return t.top?"top: ".concat(t.top,"px;"):"bottom: ".concat(t.bottom,"px;")}))};function me(){var e=Object(v.a)(),t=e.isOpen,n=e.eventLocation,c=e.selectedText,i=e.close,a=e.readerRect,r=e.selectedHighlight,o=Object(T.a)(null===r||void 0===r?void 0:r.syncId),l=Object(j.useState)(!1),s=Object(d.a)(l,2),u=s[0],b=s[1],O=Object(j.useState)({height:0,width:0}),I=Object(d.a)(O,2),S=I[0],M=I[1],y=Object(j.useState)(!1),w=Object(d.a)(y,2),N=w[0],_=w[1],L=Object(j.useState)(!1),D=Object(d.a)(L,2),F=D[0],A=D[1],P=Object(j.useState)(!1),B=Object(d.a)(P,2),G=B[0],z=B[1],U=c.split(" ").filter((function(e){return e})).sort((function(e,t){return t.length-e.length})),K=Object(h.a)(),V=K.isEnabled,W=K.loadStatus,q=Object(f.a)(),Y=Object(C.a)(q.formatMessage({id:"tts.cantRead"})),J=Y.playFromCurrentSelection,Q=Y.playFromLocation,$=Object(j.useRef)(null),ee=Object(g.b)(),ne=ee.getProp("ContextMenu.enabled"),ie=Object(m.a)(),me=ie.decks,Ce=ie.numDecks,Ee=Object(E.a)().markers,Te=Object(se.d)().openPanel,ke=Object(Z.a)().isSupported,Ie=Object(fe.a)().bookInfo,Se=ee.getProp("locale"),Me=Object(pe.a)().registerPOI;Object(j.useEffect)((function(){if(_(!1),t){var e,n,c,i,a=null===(e=$.current)||void 0===e||null===(n=e.firstElementChild)||void 0===n?void 0:n.scrollWidth,r=null===(c=$.current)||void 0===c||null===(i=c.firstElementChild)||void 0===i?void 0:i.scrollHeight;a&&r&&M({height:r,width:a})}}),[t,n.top,n.left,a,_]);function ye(){var e,t,n;if(null!==(e=o.highlight)&&void 0!==e&&e.subscribed){if(null!==(n=o.highlight)&&void 0!==n&&n.hasNote)return"contextMenu.viewNote"}else if(null===(t=o.highlight)||void 0===t||!t.isEmoji){var c;return null!==(c=o.highlight)&&void 0!==c&&c.hasNote?"contextMenu.viewNote":"workbook.highlights.addNote"}}var we=function(e){_(!1),Te(se.b.NOTEBOOK,{panelTab:be.a.FLASHCARDS,metaData:{local:{deckUUID:e,flashcard:{front:{content:c,type:ge.b.TEXT},back:{content:"",type:ge.b.TEXT}}}}}),i()},Ne=function(){var e=[];return ye()&&ee.getProp("Highlights.enabled")&&ee.getProp("Highlights.Notes.enabled")&&e.push({onClick:function(){var e,t;if(null!==(e=o.highlight)&&void 0!==e&&e.cfi){var n,c=Object(xe.h)(null===(n=o.highlight)||void 0===n?void 0:n.cfi);c&&Me(c.toString())}(Object(je.b)("note_make"),o.highlight)?Te(se.b.EXPANDED_GUTTER,{uuid:Object(ue.b)(o.highlight)}):o.highlightSelection(null===(t=Ee[0])||void 0===t?void 0:t.globalId).then((function(e){Te(se.b.EXPANDED_GUTTER,{uuid:Object(ue.b)(e.data),options:{willDeleteOnCancel:!0}})}));i()},text:q.formatMessage({id:ye()})}),ke&&V(p.a.DEFINE)&&U.length<=2&&e.push({onClick:function(){i(),b(!0),Object(je.b)("define",{lookup_term:c})},text:q.formatMessage({id:"dictionary-lookup.define"})}),ee.getProp("Copy.enabled")&&0!==Ie.copyLimit&&e.push({onClick:function(){Object(le.a)(c).then((function(){z(!0),r?Object(je.b)("highlight_copy",{text:c,sync_id:r.syncId,length:c.length}):Object(je.b)("selection_copy",{text:c})})),i()},text:q.formatMessage({id:"base.copy"})}),ee.getProp("Wikipedia.enabled")&&(r||e.push({onClick:function(){return i()},target:"_blank",href:"es_MX"===Se?"https://es.wikipedia.org/wiki/".concat(U[0]):"pt_BR"===Se?"https://pt.wikipedia.org/wiki/".concat(U[0]):"https://en.wikipedia.org/wiki/".concat(U[0]),text:q.formatMessage({id:"contextMenu.wikipedia"})})),ee.getProp("Flashcards.enabled")&&e.push({onClick:function(){if(c.length>Oe.a)return A(!0),void i();Ce>1?_(!0):1===Ce?we(me[0].uuid):0===Ce&&we()},text:q.formatMessage({id:"contextMenu.createFlashcard"})}),ee.getProp("TTS.enabled")&&e.push({onClick:function(){Object(de.b)(),r?r.cfi?Q(r.cfi):Q(r.chapterOffset):J(),Object(je.b)("tts_play_from_location")},text:q.formatMessage({id:"contextMenu.readAloud"})}),e};if(W!==x.a.OK)return null;var _e=function(){var e=o.highlight;return null!==e&&void 0!==e&&e.subscribed?Object(R.jsx)(ce,{highlight:e}):e?e.isEmoji?Object(R.jsx)(X,{selectedHighlight:r,closeMenu:i}):Object(R.jsx)(H,{selectedHighlight:r,closeMenu:i}):Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(H,{selectedHighlight:r,closeMenu:i}),Object(R.jsx)(X,{selectedHighlight:r,closeMenu:i})]})};return ne?Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(te,{open:u,closeDialog:function(){return b(!1)},defineText:U[0]}),t&&Object(R.jsx)("div",{ref:$,children:Object(R.jsx)(ve.Menu,{location:function(){var e,t=Object(k.a)(S.width,S.height,n.left,n.top+20,Object(k.b)(a,20,25)),c=t.top;return n.top>=window.innerHeight/2+20&&n.top-S.height>a.top&&(c=void 0,e=window.innerHeight-n.top+15,Object(he.b)()&&(e+=60)),{top:c,bottom:e,left:t.left}}(),raised:!0,children:N?Object(R.jsx)(ae.a,{decks:me,callback:we}):Object(R.jsxs)(R.Fragment,{children:[_e(),Object(R.jsx)(re.List,{data:[{listItems:Ne()}]})]})})}),Object(R.jsx)(oe.Toast,{open:F,toastType:"error",toastClose:function(){return A(!1)},toastTitleText:q.formatMessage({id:"contextMenu.flashcardError.title"}),toastDescriptionText:q.formatMessage({id:"workbook.flashcards.editor.maxInputReached"})}),Object(R.jsx)(oe.Toast,{open:G,toastType:"success",toastClose:function(){return z(!1)},toastTitleText:q.formatMessage({id:"base.copied"})})]}):null}},1476:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var c=n(106),i=n(0),a=n(54),r=n(67),o=n(57),l=n(1);function s(){var e=Object(i.useRef)(Object(r.a)());return Object(l.jsxs)(a.Icon,{width:18,height:18,children:[Object(l.jsx)("defs",{children:Object(l.jsx)("filter",{id:e.current,children:Object(l.jsx)("feColorMatrix",{in:"SourceGraphic",values:"0 0 0 0 1.000000 0 0 0 0 1.000000 0 0 0 0 1.000000 0 0 0 1.000000 0"})})}),Object(l.jsxs)("g",{fill:"none",fillRule:"evenodd",children:[Object(l.jsx)("path",{d:"M16 0c1.104 0 2 .733 2 1.636v14.728c0 .903-.896 1.636-2 1.636H2c-1.104 0-2-.733-2-1.636V1.636C0 .733.896 0 2 0z",fill:o.red.getShade(6)}),Object(l.jsx)("g",{transform:"translate(5 5)",filter:"url(#".concat(e.current,")"),children:Object(l.jsx)("path",{d:"M5.1 4L7.661 1.44a.777.777 0 10-1.1-1.1L4.001 2.9 1.438.34a.777.777 0 10-1.1 1.099L2.9 4 .34 6.561a.777.777 0 101.099 1.1L4 5.1l2.561 2.561a.776.776 0 001.1 0 .777.777 0 000-1.1L5.1 4.001z",fill:o.cloud.getShade(10)})})]})]})}var u=n(53);var d=Object(u.withTheme)((function(e){var t=e.status,n=e.theme.vstui.color.primary;return t===c.b.CORRECT&&(n=o.green),Object(l.jsx)(a.Icon,{width:18,height:18,children:Object(l.jsxs)("g",{fill:"none",fillRule:"evenodd",children:[Object(l.jsx)("path",{d:"M16 0c1.104 0 2 .733 2 1.636v14.728c0 .903-.896 1.636-2 1.636H2c-1.104 0-2-.733-2-1.636V1.636C0 .733.896 0 2 0z",fill:n.getShade(6)}),Object(l.jsx)("path",{d:"M8.98 12.177a.889.889 0 01-1.259 0L5.26 9.716a.89.89 0 011.257-1.257l1.834 1.833 4.03-4.031a.888.888 0 111.257 1.257l-4.659 4.66z",fill:"#FFF"})]})})}));function b(){return Object(l.jsx)(a.Icon,{width:18,height:18,children:Object(l.jsxs)("g",{fill:"none",fillRule:"evenodd",children:[Object(l.jsx)("path",{d:"M16 0c1.104 0 2 .733 2 1.636v14.728c0 .903-.896 1.636-2 1.636H2c-1.104 0-2-.733-2-1.636V1.636C0 .733.896 0 2 0z",fill:"#FFF"}),Object(l.jsx)("path",{d:"M2 16.364h14V1.636H2v14.728zM18 1.636C18 .733 17.104 0 16 0H2C.896 0 0 .733 0 1.636v14.728C0 17.267.896 18 2 18h14c1.104 0 2-.733 2-1.636V1.636z",fill:o.cloud.getShade(10)}),Object(l.jsx)("g",{fill:o.cloud.getShade(6),children:Object(l.jsx)("path",{d:"M9.01 4.002c.019.005.04.008.058.016.076.03.137.092.166.169.019.051.015.066.017.12l-.246 3.55h2.633l.057.005c.05.015.064.016.107.046a.294.294 0 01.124.25c-.002.052-.011.063-.028.112l-2.675 5.57c-.01.016-.02.035-.032.051a.297.297 0 01-.385.065.291.291 0 01-.128-.2c-.003-.02-.002-.04-.003-.06l.248-3.778H6.288l-.058-.006c-.049-.016-.064-.016-.107-.047A.294.294 0 016 9.612c.003-.052.012-.064.03-.112l2.675-5.342a.291.291 0 01.183-.15.38.38 0 01.121-.006z"})})]})})}function j(){return Object(l.jsx)(a.Icon,{width:18,height:18,children:Object(l.jsxs)("g",{fill:"none",fillRule:"evenodd",children:[Object(l.jsx)("path",{d:"M16 0c1.104 0 2 .733 2 1.636v14.728c0 .903-.896 1.636-2 1.636H2c-1.104 0-2-.733-2-1.636V1.636C0 .733.896 0 2 0z",fill:"#FFF"}),Object(l.jsx)("path",{d:"M2 16.364h14V1.636H2v14.728zM18 1.636C18 .733 17.104 0 16 0H2C.896 0 0 .733 0 1.636v14.728C0 17.267.896 18 2 18h14c1.104 0 2-.733 2-1.636V1.636z",fill:o.cloud.getShade(10)}),Object(l.jsxs)("g",{fillRule:"nonzero",children:[Object(l.jsx)("path",{d:"M6.015 4A2 2 0 108 6c0-1.104-.88-2-1.985-2z",fill:o.cloud.getShade(5)}),Object(l.jsx)("path",{fill:o.cloud.getShade(10),d:"M10 5h4v2h-4z"}),Object(l.jsx)("path",{d:"M6.015 10A2 2 0 108 12c0-1.104-.88-2-1.985-2z",fill:o.cloud.getShade(5)}),Object(l.jsx)("path",{fill:o.cloud.getShade(10),d:"M10 11h4v2h-4z"})]})]})})}var O=Object(u.withTheme)((function(e){var t=e.theme;return Object(l.jsx)(a.Icon,{width:18,height:18,children:Object(l.jsxs)("g",{fill:"none",fillRule:"evenodd",children:[Object(l.jsx)("path",{d:"M16 0c1.104 0 2 .733 2 1.636v14.728c0 .903-.896 1.636-2 1.636H2c-1.104 0-2-.733-2-1.636V1.636C0 .733.896 0 2 0z",fill:t.vstui.color.primary.getShade(6)}),Object(l.jsx)("path",{d:"M9.01 4.002c.019.005.04.008.058.016.076.03.137.092.166.169.019.051.015.066.017.12l-.246 3.55h2.633l.057.005c.05.015.064.016.107.046a.294.294 0 01.124.25c-.002.052-.011.063-.028.112l-2.675 5.57c-.01.016-.02.035-.032.051a.297.297 0 01-.385.065.291.291 0 01-.128-.2c-.003-.02-.002-.04-.003-.06l.248-3.778H6.288l-.058-.006c-.049-.016-.064-.016-.107-.047A.294.294 0 016 9.612c.003-.052.012-.064.03-.112l2.675-5.342a.291.291 0 01.183-.15.38.38 0 01.121-.006z",fill:"#FFF"})]})})}));function f(e){var t=e.enrichmentStatus,n=e.assessmentType;return t===c.b.INCORRECT?Object(l.jsx)(s,{}):t===c.b.CORRECT?Object(l.jsx)(d,{status:t}):t===c.b.INCOMPLETE?n===c.a.SUMMATIVE?Object(l.jsx)(b,{}):Object(l.jsx)(j,{}):t===c.b.COMPLETE?n===c.a.SUMMATIVE?Object(l.jsx)(O,{}):Object(l.jsx)(d,{status:t}):null}},1477:function(e,t,n){"use strict";n.d(t,"a",(function(){return H}));var c=n(0),i=n(68),a=n(62),r=n(63),o=Object(a.e)(r.a.TRACK_LOCATION),l=Object(a.e)(r.a.RESET_TRACKED_LOCATIONS),s=Object(a.e)(r.a.SEND_TRACKED_LOCATIONS),u=n(58),d=n(91),b=n(3),j=n(193),O=n(1253),f=n(1211),h=n(115),g=n(180),p=n(1295),x=n(108),v=n(87);function m(e){return e.locations.dimensions}var C=Object(O.a)((function(e){return function(e){return e.locations.locations}(e)}),(function(e){return Object(j.g)(e)}),(function(e){return Object(g.e)(e)}),(function(e,t,n){return e.map((function(e){return e.type===f.b.HIGHLIGHT?function(e,t){var n=t.find((function(t){return t.syncId===e.data.syncId}));if(n)return Object(b.a)(Object(b.a)({},e),{},{data:n,uuid:Object(p.b)(n),positionMode:f.a.TOP})}(e,t):e.type===f.b.ENRICHMENT?function(e,t){var n=t.find((function(t){return t.id===e.data.id}));if(n)return Object(b.a)(Object(b.a)({},e),{},{data:n,uuid:Object(p.a)(e.data),positionMode:f.a.BOTTOM})}(e,n):void 0})).filter((function(e){return void 0!==e}))})),E=Object(O.a)((function(e){return Object(j.g)(e)}),(function(e){return e.map((function(e){var t={data:{syncId:e.syncId},type:f.b.HIGHLIGHT};return e.cfi?{metadata:t,cfi:Object(h.parseCfiRange)(e.cfi).start.toString()}:{metadata:t,offset:e.chapterOffset}}))})),T=Object(O.a)((function(e){return Object(g.e)(e)}),(function(e){return e.map((function(e){return{metadata:{data:{id:e.id},type:f.b.ENRICHMENT},cfi:e.cfi,mode:f.c.BOTTOM_RIGHT,isHiddenStatic:!0}}))})),k=Object(O.a)((function(e){return E(e)}),(function(e){return T(e)}),(function(e){return Object(x.b)(e)}),(function(e,t,n){var c=[].concat(Object(d.a)(e),Object(d.a)(t));return n?c.filter((function(e){if(e.cfi){var t=Object(v.g)(e.cfi,n);return Object(v.i)(t,n)}return!1})):c})),I=n(1263),S=n(1386),M=n(1197),y=n(14);var w=n(71),N=n(10);var _=n(1459),R=n(107),L=n(83);function H(){Object(I.a)(),Object(S.a)(),function(){var e=Object(u.c)(),t=Object(y.b)().getProp("CoachMe.enabled");Object(c.useEffect)((function(){t&&e(Object(M.d)())}),[e,t])}(),function(){var e=Object(u.c)(),t=Object(w.a)(),n=t.userInfo,i=t.loadStatus,a=Object(u.d)(g.a);Object(c.useEffect)((function(){i===N.a.OK&&a.length>0&&e(Object(M.a)({sessionId:n.sessionId}))}),[n,i,a,e])}(),Object(_.a)();var e=Object(i.a)(),t=Object(u.d)(k),n=Object(u.d)(C),a=Object(u.d)(m),r=Object(y.b)(),d=r.getProp("Highlights.enabled")&&r.getProp("Highlights.Notes.enabled"),b=Object(R.a)(L.a.COACH_ME_DISABLED).currentVal;return Object(c.useEffect)((function(){e(l()),t.forEach((function(t){e(o(t))})),e(s())}),[t,e]),Object(c.useMemo)((function(){return{positionedItems:n.filter((function(e){return!(e.type===f.b.ENRICHMENT&&b)&&!(e.type===f.b.HIGHLIGHT&&!d)})),contextHeight:a.height}}),[a,n,b,d])}},1478:function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var c=n(9),i=n(0),a=n(58),r=n(195),o=n(127),l=n(95);function s(e){return e.textSelect}var u=function(e){return s(e).text},d=function(e){return s(e).highlight},b=function(e){return s(e).location},j=n(117),O=n(75),f=n(62),h=n(63),g=Object(f.e)(h.a.CLEAR_SELECTION),p=[O.a.SELECTION_CANCELLED,O.a.HIGHLIGHT_CLICK_OUTSIDE,O.a.PAGE_SCROLL,O.a.NAVIGATION_REQUESTED];function x(){var e=Object(i.useState)(!1),t=Object(c.a)(e,2),n=t[0],s=t[1],O=Object(a.d)(u),f=Object(a.d)(d),h=Object(a.d)(b),x=Object(r.a)(),v=Object(a.c)(),m=""!==O,C=Object(o.a)(l.a.PREFERENCES_FAST_HIGHLIGHT_ENABLED).value,E=Object(i.useCallback)((function(){m&&v(g())}),[m,v]);Object(j.a)(p,E),Object(i.useEffect)((function(){""!==O&&s(!1)}),[O]);var T=Object(i.useCallback)((function(){s(!0)}),[]);return{isOpen:m&&!C&&!n,eventLocation:{top:h.top+x.top,left:h.left+x.left},readerRect:x,selectedText:O,close:T,selectedHighlight:f}}},187:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var c=n(58),i=n(180);function a(){return Object(c.d)(i.a).length>0}},212:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var c=n(121);function i(){return!Object(c.a)()}},84:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return j})),n.d(t,"d",(function(){return O})),n.d(t,"e",(function(){return f}));var c,i,a=n(9),r=n(3),o=n(95),l=n(0),s=n(58),u=n(1189),d=n(1382),b=n(176);function j(){return Object(d.a)(o.a.READER_PANEL)||{panelType:null}}function O(){var e=Object(u.a)(o.a.READER_PANEL),t=Object(s.c)(),n=Object(l.useCallback)((function(t,n,c){e({panelType:t,metadata:n,context:c})}),[e]),c=Object(l.useCallback)((function(t){e(Object(r.a)({panelType:null},!0===t&&{context:{autoClosed:!0}}))}),[e]),i=Object(l.useCallback)((function(e,i,a){t((function(t,r){var l=Object(o.c)(r(),o.a.READER_PANEL);e!==(null===l||void 0===l?void 0:l.panelType)?n(e,i,a):c()}))}),[t,n,c]),a=Object(l.useCallback)((function(){t((function(t,n){var c=Object(o.c)(n(),o.a.READER_PANEL);e(Object(r.a)(Object(r.a)({},c),{},{metadata:void 0}))}))}),[e,t]);return Object(l.useMemo)((function(){return{openPanel:n,closePanel:c,togglePanel:i,clearMetadata:a}}),[n,c,i,a])}function f(){var e=j(),t=e.panelType,n=e.metadata,c=e.context,i=Object(b.a)(t),o=Object(b.a)(c),s=Object(b.a)(n),u=Object(l.useRef)(),d=Object(l.useRef)(),O=Object(l.useState)(!1),f=Object(a.a)(O,2),h=f[0],g=f[1];return Object(l.useEffect)((function(){var e=!t&&!!i;g(e),e&&(null!==c&&void 0!==c&&c.autoClosed?(u.current=void 0,d.current=void 0):(u.current=o?Object(r.a)({},o):void 0,d.current=s?Object(r.a)({},s):void 0))}),[c,h,t,o,s,i]),{panelClosed:h,closeMetadata:d.current,closeContext:u.current}}!function(e){e.SEARCH="search",e.NOTEBOOK="notebook",e.EXPANDED_GUTTER="expanded-gutter",e.ENRICHMENT="enrichment",e.INTEGRATIONS="integrations",e.ENRICHMENT_PROGRESS="enrichment-progress"}(c||(c={})),function(e){e.ThreeDot="3dot",e.Search="search",e.Workbook="workbook",e.GutterIcon="gutter-icon",e.Nudge="nudge"}(i||(i={}))}}]);
//# sourceMappingURL=5.12645101.chunk.js.map