(this.webpackJsonpsupernova=this.webpackJsonpsupernova||[]).push([[1013],[,,,,function(t,e,n){"use strict";n.d(e,"k",(function(){return r})),n.d(e,"b",(function(){return c})),n.d(e,"c",(function(){return o})),n.d(e,"g",(function(){return u})),n.d(e,"i",(function(){return i})),n.d(e,"h",(function(){return a})),n.d(e,"d",(function(){return s})),n.d(e,"a",(function(){return d})),n.d(e,"f",(function(){return f})),n.d(e,"e",(function(){return l})),n.d(e,"j",(function(){return b})),n.d(e,"l",(function(){return O}));var r="/books/:vbid/:location*",c="/dev",o="/features",u="/error",i="".concat(u,"/system"),a="".concat(u,"/not-found"),s="/embed/:path*",d="/crane/:vbid/:path*",f="/enrichment/:vbid/:id",l="/enrichment-progress/:vbid",b="/flashcards/deck/:deckId",O="/test/:type"},,,,,,function(t,e,n){"use strict";var r,c,o,u;function i(t){var e=t.reduce((function(t,e){return t&&e===c.OK}),!0),n=t.reduce((function(t,e){return t||e===c.ERROR}),!1),r=t.reduce((function(t,e){return t||e===c.FETCHING}),!1);return e?c.OK:n?c.ERROR:r?c.FETCHING:c.WAITING}function a(t){var e=t.reduce((function(t,e){return t&&e===o.OK}),!0),n=t.reduce((function(t,e){return t||e===o.ERROR}),!1);return e?o.OK:n?o.ERROR:o.PENDING}n.d(e,"a",(function(){return c})),n.d(e,"c",(function(){return o})),n.d(e,"b",(function(){return u})),n.d(e,"d",(function(){return i})),n.d(e,"e",(function(){return a})),function(t){t.PENDING="PENDING",t.DONE="DONE"}(r||(r={})),function(t){t.WAITING="WAITING",t.FETCHING="FETCHING",t.OK="OK",t.ERROR="ERROR"}(c||(c={})),function(t){t.PENDING="PENDING",t.OK="OK",t.ERROR="ERROR"}(o||(o={})),function(t){t.WAITING="WAITING",t.FETCHING="FETCHING",t.DONE="DONE"}(u||(u={}))},function(t,e,n){"use strict";function r(){var t=document.getElementById("staticloader");t&&t.parentNode&&t.parentNode.removeChild(t)}function c(){var t="/reader";return"https://".concat(window.location.host).concat(t)}function o(){return"/reader"}function u(){var t=document.querySelector("meta[name=viewport]");window.addEventListener("resize",(function(){var e,n=null===(e=document.activeElement)||void 0===e?void 0:e.nodeName.toLowerCase();"textarea"===n||"input"===n?null===t||void 0===t||t.setAttribute("content","height="+window.screen.height+"px, width=device-width, initial-scale=1.0"):null===t||void 0===t||t.setAttribute("content","width=device-width, initial-scale=1.0")}))}n.d(e,"d",(function(){return r})),n.d(e,"c",(function(){return c})),n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return u}))},function(t,e,n){"use strict";function r(){return!1}n.d(e,"a",(function(){return r}))},,function(t,e,n){"use strict";n.d(e,"a",(function(){return l})),n.d(e,"b",(function(){return b})),n.d(e,"d",(function(){return O})),n.d(e,"c",(function(){return j}));var r=n(3),c=n(9),o=n(0),u=n.n(o),i=n(38),a=n(20),s=n.n(a),d=n(1),f=u.a.createContext(null),l=function(t){var e=t.children,n=t.brand,r=Object(o.useState)({}),u=Object(c.a)(r,2),i=u[0],a=u[1],l=Object(o.useMemo)((function(){return n?{brandData:s()(n,i),setOverride:a,removeOverride:function(){return a({})},hasOverride:Object.keys(i).length>0}:null}),[n,i]);return l?Object(d.jsx)(f.Provider,{value:l,children:e}):null};function b(){var t=Object(o.useContext)(f),e=Object(o.useCallback)((function(e){return Object(i.a)(null===t||void 0===t?void 0:t.brandData,e)}),[t]);return Object(o.useMemo)((function(){return{getProp:e}}),[e])}function O(t){return function(e){var n=b();return Object(d.jsx)(t,Object(r.a)(Object(r.a)({},e),{},{brand:n}))}}function j(t){var e=Object(o.useContext)(f);return Object(o.useEffect)((function(){return e.setOverride(t),function(){e.removeOverride()}}),[e,t]),e.hasOverride}},function(t,e,n){"use strict";n.d(e,"a",(function(){return u})),n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return a})),n.d(e,"d",(function(){return s}));var r={noticeError:function(t){console.error(t);var e=t;if("string"===typeof t&&(e=new Error(t)),window.newrelic)try{throw e}catch(n){window.newrelic.noticeError(n)}},noticeInteraction:function(t,e){window.newrelic&&window.newrelic.addPageAction(t,e)},setAttribute:function(t,e){window.newrelic&&window.newrelic.setCustomAttribute(t,e)},unsetAttribute:function(t){window.newrelic&&window.newrelic.setCustomAttribute(t,void 0)}},c={};var o={noticeInteraction:function(t,e){window.Jigsaw&&window.Jigsaw.Events.logEvent({name:t,json:e,vbid:c.vbid})},setAttribute:function(t,e){c[t]=e},unsetAttribute:function(t){delete c[t]}},u=r.noticeError,i=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(console.log("noticeInteraction: ".concat(t," ").concat(JSON.stringify(e))),"object"!==typeof e)throw Error("extra params must be type object");r.noticeInteraction(t,e),o.noticeInteraction(t,e)},a=function(t,e){r.setAttribute(t,e),o.setAttribute(t,e)},s=function(t){r.unsetAttribute(t),o.unsetAttribute(t)}},,,,function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(0),c=n(12);function o(t){var e=t.path,n=t.replace;return Object(r.useEffect)((function(){var t=Object(c.a)()?"https://bookshelf-dev.vitalsource.com".concat(e):e;n?window.location.replace(t):window.location.href=t}),[e,n]),null}},,function(t,e,n){"use strict";function r(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,c=new Date;c.setTime(c.getTime()+24*n*60*60*1e3);var o="expires="+c.toUTCString(),u=t+"="+e+"; "+o+";path=/";r&&(u+=";domain="+r),document.cookie=u}function c(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;r(t,!1,-1,e)}function o(t){for(var e=t+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(var c=n[r];" "===c.charAt(0);)c=c.substring(1);if(0===c.indexOf(e))return c.substring(e.length,c.length)}return""}n.d(e,"c",(function(){return r})),n.d(e,"b",(function(){return c})),n.d(e,"a",(function(){return o}))},,,,,,,,,,,function(t,e,n){"use strict";n.d(e,"c",(function(){return r})),n.d(e,"b",(function(){return c})),n.d(e,"a",(function(){return o}));var r=function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1},c=function(){return"ontouchstart"in document.documentElement},o=function(){return/(android)/i.test(navigator.userAgent)}},,function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var r=n(3),c=n(9),o=n(14),u=n(0),i=n(39),a=n(20),s=n.n(a),d=n(12),f=n(2),l=n(4),b=n(10),O=n(11),j=n(15),v=n(1);function h(t){var e=t.children,n=t.product,a=t.render,h=function(t){var e=Object(u.useState)(null),n=Object(c.a)(e,2),o=n[0],a=n[1],s=Object(u.useState)(b.c.PENDING),d=Object(c.a)(s,2),f=d[0],l=d[1];return Object(u.useEffect)((function(){a(null);var e=new URLSearchParams(window.location.search).get("brand")||window.location.hostname;i.loadBrand(e,t).then((function(t){a(Object(r.a)({id:e},t)),l(b.c.OK)})).catch((function(t){Object(j.a)(t),l(b.c.ERROR)}))}),[t]),Object(u.useMemo)((function(){return{brand:o,status:f}}),[o,f])}(n),p=h.brand,m=h.status,E=function(){var t=Object(u.useState)(null),e=Object(c.a)(t,2),n=e[0],r=e[1],o=Object(u.useState)(b.c.PENDING),i=Object(c.a)(o,2),a=i[0],s=i[1],f=Object(u.useCallback)((function(t){r(t),s(b.c.OK)}),[]);return Object(u.useEffect)((function(){var t=Object({NODE_ENV:"production",PUBLIC_URL:"/reader",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_TIGHTROPE_HOST:"tightrope.vitalsource.com",REACT_APP_MOSAIC_PATH:"/mosaic",REACT_APP_OVERLEAF_HOST:"flashcards.vitalsource.com",REACT_APP_MOSAIC_HOST:"jigsaw.vitalsource.com",REACT_APP_TIGHTROPE_TENANT:"bookshelf",REACT_APP_NEW_RELIC_APP_ID:"867840890"}).REACT_APP_LOCAL_BRAND;Object(d.a)()?fetch("".concat(Object(O.b)(),"/local-brands/").concat(t,".json")).then((function(t){return t.json()})).then((function(t){return f(t)})).catch((function(){f({})})):f({})}),[f]),Object(u.useMemo)((function(){return{localBrand:n,localStatus:a}}),[n,a])}(),w=E.localBrand,g=E.localStatus,P=Object(b.e)([m,g]),R=Object(u.useMemo)((function(){return p&&w?s()(p,w):null}),[p,w]);return P===b.c.ERROR?Object(v.jsx)(f.a,{to:l.i}):P===b.c.PENDING?null:Object(v.jsx)(o.a,{brand:R,children:a?a(R):e})}},,,function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n(27),c=n(28),o=n(31),u=n(30),i=n(0),a=n.n(i),s=n(15),d=function(t){Object(o.a)(n,t);var e=Object(u.a)(n);function n(){var t;Object(r.a)(this,n);for(var c=arguments.length,o=new Array(c),u=0;u<c;u++)o[u]=arguments[u];return(t=e.call.apply(e,[this].concat(o))).state={hasError:!1},t}return Object(c.a)(n,[{key:"componentDidCatch",value:function(t){var e,n;Object(s.a)(t),null===(e=(n=this.props).onError)||void 0===e||e.call(n)}},{key:"render",value:function(){return this.state.hasError?this.props.errorContent||null:this.props.children}}],[{key:"getDerivedStateFromError",value:function(){return{hasError:!0}}}]),n}(a.a.Component)},function(t,e,n){"use strict";function r(t,e){return e&&e.split?e.split(".").reduce((function(t,e){return null!==t&&"undefined"!==typeof t?t[e]:null}),t):null}n.d(e,"a",(function(){return r}))},,function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(3),c=n(0),o=n.n(c),u=n(1);function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{lazy:function(e){var n=o.a.lazy(e);return function(e){return Object(u.jsx)(c.Suspense,{fallback:t,children:Object(u.jsx)(n,Object(r.a)({},e))})}}}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return h})),n.d(e,"c",(function(){return p}));var r,c=n(9),o=n(17),u=n(3),i=n(0),a=n.n(i),s=n(21),d=n(12),f=n(1);!function(t){t.TEMP_PLACEHOLDER="temp-placeholder"}(r||(r={}));var l=Object.values(r).reduce((function(t,e){return Object(u.a)(Object(u.a)({},t),{},Object(o.a)({},e,!1))}),{}),b="supernova-features",O=Object(s.a)(b),j=O?JSON.parse(O):{},v=a.a.createContext({myFeatures:j,allFeatures:Object(u.a)(Object(u.a)({},l),j),setFeature:function(){},resetFeature:function(){}});function h(t){var e=t.children,n=Object(i.useState)(j),r=Object(c.a)(n,2),a=r[0],O=r[1];Object(i.useEffect)((function(){if(j!==a){var t=Object(d.a)()?365:1/24;Object(s.c)(b,JSON.stringify(a),t)}}),[a]);var h=Object(i.useCallback)((function(t){var e=Object(u.a)({},a);delete e[t],O(e)}),[a]),p=Object(i.useCallback)((function(t,e){e===l[t]?h(t):O(Object(u.a)(Object(u.a)({},a),{},Object(o.a)({},t,e)))}),[a,h]),m=Object(i.useMemo)((function(){return{myFeatures:a,allFeatures:Object(u.a)(Object(u.a)({},l),a),setFeature:p,resetFeature:h}}),[a,p,h]);return Object(f.jsx)(v.Provider,{value:m,children:e})}function p(){var t=Object(i.useContext)(v);return Object(i.useMemo)((function(){return{setFeature:t.setFeature,resetFeature:t.resetFeature,myFeatures:t.myFeatures}}),[t])}},,,,,,,,,,,function(t,e,n){"use strict";n.r(e);var r=n(29),c=n.n(r),o=n(0),u=n(18),i=n(37),a=n(1);function s(t){var e=t.children;return Object(a.jsx)(i.a,{errorContent:Object(a.jsx)("p",{style:{paddingLeft:8},children:"Something went wrong. Please try again later."}),children:e})}var d=n(3),f=n(4),l=n(2),b=n(19),O=n(14),j=n(11);function v(t){var e=Object(O.b)(),n=new URLSearchParams;return n.set("theme",e.getProp("Theme.primary")),n.set("locale",e.getProp("locale")),t.location.state&&n.set("missingURL",Object(j.c)()+t.location.state.referrer),Object(a.jsx)(b.a,{path:"/error/not-found?".concat(n.toString()),replace:!0})}function h(){var t=Object(O.b)(),e=new URLSearchParams;return e.set("locale",t.getProp("locale")),Object(a.jsx)(b.a,{path:"/error/system-error-space?".concat(e.toString()),replace:!0})}var p=n(34);function m(){return Object(a.jsx)(p.a,{product:"supernova",children:Object(a.jsxs)(l.d,{children:[Object(a.jsx)(l.b,{path:f.h,component:v}),Object(a.jsx)(l.b,{path:f.i,component:h}),Object(a.jsx)(l.a,{to:f.i})]})})}var E=n(40),w=n(12),g=Object(E.a)(),P=g.lazy((function(){return Promise.all([n.e(0),n.e(1),n.e(4),n.e(7),n.e(1015)]).then(n.bind(null,2058))})),R=g.lazy((function(){return n.e(1022).then(n.bind(null,2066))})),x=g.lazy((function(){return Promise.all([n.e(0),n.e(1027)]).then(n.bind(null,2051))})),A=g.lazy((function(){return Promise.all([n.e(0),n.e(1023)]).then(n.bind(null,2052))})),N=g.lazy((function(){return Promise.all([n.e(0),n.e(1),n.e(4),n.e(1016),n.e(1019)]).then(n.bind(null,2064))})),C=g.lazy((function(){return Promise.all([n.e(0),n.e(1),n.e(7),n.e(1026),n.e(1017)]).then(n.bind(null,2062))})),T=g.lazy((function(){return n.e(1029).then(n.bind(null,2054))}));function I(){var t=Object(l.h)();return Object(a.jsxs)(l.d,{children:[Object(a.jsx)(l.b,{path:f.k,render:function(t){return Object(a.jsx)(P,Object(d.a)({},t),t.match.params.vbid)}}),Object(a.jsx)(l.b,{path:[f.f,f.e],component:N}),Object(a.jsx)(l.b,{path:f.j,component:C,exact:!0}),Object(a.jsx)(l.b,{path:f.b,component:R}),Object(a.jsx)(l.b,{path:f.c,component:x}),Object(a.jsx)(l.b,{path:f.g,component:m}),Object(a.jsx)(l.b,{path:f.d,component:A}),Object(a.jsx)(l.b,{path:f.a,component:A}),Object(a.jsx)(l.b,{path:f.l,component:T}),Object(w.a)()&&Object(a.jsx)(l.a,{to:f.b,from:"/",exact:!0}),Object(a.jsx)(l.a,{to:{pathname:f.h,state:{referrer:t.pathname}}})]})}var S=n(15);var y=n(32),_=n(41);function D(){return function(){var t=Object(o.useCallback)((function(t){var e=t.target.closest("a,button");if(e){var n=e.getAttribute("data-interaction-id");if(n){var r={};e.attributes.forEach((function(t){var e="data-interaction-param-";if(0===t.name.indexOf(e)){var n=t.name.substr(e.length);r[n]=t.value}})),Object(S.b)(n,r)}}}),[]);Object(o.useEffect)((function(){return window.addEventListener("click",t,!0),function(){window.removeEventListener("click",t,!0)}}),[t])}(),Object(o.useEffect)((function(){Object(j.d)()}),[]),Object(a.jsx)(s,{children:Object(a.jsx)(_.b,{children:Object(a.jsx)(u.a,{basename:Object(j.b)(),children:Object(a.jsx)(I,{})})})})}Object(y.a)()&&Object(j.a)(),c.a.render(Object(a.jsx)(D,{}),document.getElementById("root"))}],[[52,1014,1018]]]);
//# sourceMappingURL=main.ed1bbe25.chunk.js.map